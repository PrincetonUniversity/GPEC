<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>LICENSE &#8212; GPEC 1.5.5 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#"><img height=40, src="_static/GPEC_logo.png">
          <!-- GPEC-->
        </a>
        <!-- <span class="navbar-text navbar-version pull-left"><b>1.5</b></span> -->
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="references.html">Cite</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="outputs.html">I/O</a></li>
                <li><a href="releases.html">Release History</a></li>
                <li><a href="developers.html">Develop</a></li>
                <li><a href="source_documentation.html">Code</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Jump to <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>
           <!-- 
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
           -->
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="#">
              <img class="logo" src="_static/GPEC_logo.png" alt="Logo"/>
            </a></p><ul>
<li><a class="reference internal" href="#">LICENSE</a></li>
<li><a class="reference internal" href="#installations">Installations</a><ul>
<li><a class="reference internal" href="#public">Public</a></li>
<li><a class="reference internal" href="#personal">Personal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-using-omfit">Running using OMFIT</a></li>
<li><a class="reference internal" href="#manual-run-process">Manual Run Process</a><ul>
<li><a class="reference internal" href="#manual-examples">Manual Examples</a></li>
</ul>
</li>
</ul>

<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-12 content" role="main">
      
  <section id="license">
<h1>LICENSE<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h1>
<p>The Generalized Perturbed Equilibrium Code (GPEC) package is available for use under the terms of the standard MIT license.</p>
</section>
<section id="installations">
<span id="installation"></span><h1>Installations<a class="headerlink" href="#installations" title="Permalink to this heading">¶</a></h1>
<section id="public">
<h2>Public<a class="headerlink" href="#public" title="Permalink to this heading">¶</a></h2>
<p>Public installations are available at PPPL (portal.pppl.gov), GA (iris.gat.com), and NFRI (ukstar). Public installations are regularly cloned and kept up to date with the <a class="reference internal" href="releases.html#releases"><span class="std std-ref">official releases</span></a>.</p>
<p>The default gpec module at each institution tracks the latest release. Public installations of the “development” (beta) branch are also available if you should happen to need a new feature right away.</p>
<p>On any of the above clusters, use the module system to obtain the appropriate gpec environment. For example, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">avail</span>
</pre></div>
</div>
<p>to see the available releases or simply,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">gpec</span>
</pre></div>
</div>
<p>to load the current default. This will load the necessary compiler modules and add the appropriate directories to your path, such that you can simply call the executables (i.e. dcon, gpec, etc.).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>For PPPL Users</strong>
On the Princeton portal.pppl.gov computers, users must first execute <code class="code docutils literal notranslate"><span class="pre">module</span> <span class="pre">use</span> <span class="pre">/p/gpec/modules</span></code>. It is recommended this be included in a .bashrc or similar file.</p>
</div>
<p>Loading the gpec module sets the <code class="code docutils literal notranslate"><span class="pre">$GPECHOME</span></code> environment variable. This is helpful for find the path to source code, including such helpful things as the <span class="xref std std-ref">examples</span> at <code class="code docutils literal notranslate"><span class="pre">$GPECHOME/docs/examples</span></code>.</p>
<p>Modules for any past minor release versions installed are retained on the cluster, so you can always go back to re-run old work. The latest development branch is also available using,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="n">load</span> <span class="n">gpec</span><span class="o">/</span><span class="mf">0.0</span>
</pre></div>
</div>
<p>but this should be used with the understanding that many of it’s features are in beta testing and no guaranties are made for its stability. We ask that users always <a class="reference internal" href="contact.html#contacts"><span class="std std-ref">contact a developer</span></a> if/when thinking of using a beta feature.</p>
</section>
<section id="personal">
<h2>Personal<a class="headerlink" href="#personal" title="Permalink to this heading">¶</a></h2>
<p>Personal copies of GPEC should be cloned from the <a class="reference external" href="https://github.com/PrincetonUniversity/GPEC">Github repository</a>, as the make process uses git commands assuming the installation is a git repository. The repository remains private for now, so only those with access will be able to install/update the package. Contact <a class="reference external" href="mailto:nlogan&#37;&#52;&#48;pppl&#46;gov">nlogan<span>&#64;</span>pppl<span>&#46;</span>gov</a> for access.</p>
<p>The global makefile can be found in the install directory. This essentially enters and makes each individual subdirectory. Each subdirectory’s makefile references the DEFAULTS.inc file, also in install.
Compiled using this install makefile, the executables will then be available in their individual subdirectories as well as collected in the bin directory.</p>
<p>Compiling should use intel compilers with the -qopenmp flag for parallel kinetic calculations in the gpec executable. An example make command might be,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">FFLAGS</span><span class="o">=</span><span class="s2">&quot;-qopenmp&quot;</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span> <span class="o">|</span> <span class="n">tee</span> <span class="n">make</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>where the logging part is merely a useful suggestion. Appropriate compiler details for the major fusion clusters on which public installations are maintained is recorded in the $GPECHOME/install/DEFAULTS.inc file annotations.</p>
</section>
</section>
<section id="running-using-omfit">
<span id="run-process"></span><h1>Running using OMFIT<a class="headerlink" href="#running-using-omfit" title="Permalink to this heading">¶</a></h1>
<p><a class="reference external" href="http://gafusion.github.io/OMFIT-source/">OMFIT</a> is a framework for integrated modeling. It contains a GPEC module for preparing, running, and analyzing GPEC runs that is highly recommended for pure users (non-developers). OMFIT is the recommended way to run GPEC for new users. Public releases of OMFIT are available on most major fusion clusters, or it can be downloaded to your personal computer.</p>
<p>Using OMFIT guides users through a clean workflow, providing many powerful tools to facilitate the necessary preparation of inputs. It provides the interface, for example, with EFIT and profile fitting tools on many machines. It also enables users to submit GPEC jobs remotely, quickly visualize outputs, perform powerful python post-processing, and share projects with others.</p>
<p>A complete description of the OMFIT GPEC module can be found on the <a class="reference external" href="http://gafusion.github.io/OMFIT-source/modules/mod_GPEC.html#mod-gpec">module documentation page</a> and a thorough discussion of the workflow, inputs, outputs, and post-processing can be found in <a class="reference external" href="https://docs.google.com/document/d/1qSUjJZYmET8-X08rRGBT6L_9D9fzEN_zCV75OX_ZbZk/edit?usp=sharing">the corresponding google doc tutorial</a>.</p>
</section>
<section id="manual-run-process">
<h1>Manual Run Process<a class="headerlink" href="#manual-run-process" title="Permalink to this heading">¶</a></h1>
<p>This section outlines the basic run process with reference to some of the most common input-output manipulation in GPEC runs. This is not meant to be a complete coverage of the many options and capabilities available to the user during this process. For a complete list of the input and output control variables please see the <span class="xref std std-ref">Inputs</span> section.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The use of $GPECHOME and executable commands such as <cite>dcon</cite>, <cite>gpec</cite> or <cite>pentrc</cite> assumes the appropriate environement variables have been set. The easiest way to do this is to use the module commands associated with one of the public installations.</p>
</div>
<p>To run GPEC, a user should first navigate to a directory in which they wish to run and write outputs. Once in the run-directory the user needs (at a minimum) the dcon, equil, vac, and gpec namelist files, which can be copied from $GPECHOME/input for example. The user can then follow these simple steps to complete a GPEC run:</p>
<ol class="arabic simple">
<li><p>Edit the dcon.in file</p>
<ul class="simple">
<li><p>DCON will only run for a single toroidal mode number. Set the toroidal mode number for the entire run here using the crucial parameter nn. GPEC outputs for multiple toroidal mode numbers can be added together in the post-processing.</p></li>
</ul>
</li>
<li><p>Edit the equil.in file</p>
<ul class="simple">
<li><p>Specify the specific plasma shot of interest by setting the initial equilibrium file (ex: EFIT output g-file).</p></li>
<li><p>Set the range of normalized flux to be included in the calculation.</p></li>
</ul>
</li>
<li><p>$GPECHOME/bin/dcon</p>
<ul class="simple">
<li><p>This creates the euler.bin file, which provides a orthonormal basis of force balance states for GPEC.</p></li>
<li><p>Once this is created, you can various effects on this equilibrium by changing the 3D field input in gpec.in without having to run DCON again.</p></li>
</ul>
</li>
<li><p>Edit the gpec.in file</p>
<ul class="simple">
<li><p>Specify the 3D error field input file to be used in GPEC to perturb the 2D equilibrium.</p>
<ul>
<li><p>This must match the psihigh variable used in equil.in.</p></li>
</ul>
</li>
<li><p>Set the flags to specify the desired outputs.</p></li>
</ul>
</li>
<li><p>$GPECHOME/bin/gpec</p>
<ul class="simple">
<li><p>That’s it! Now go look at your output files.</p></li>
</ul>
</li>
</ol>
<p>Note that GPEC takes 2-3 inputs depending on whether kinetic effects are included. All calculations require a file containing the 2D plasma equilibrium, which is specified in equil.in prior to the DCON run. The most common equilibrium source is “efit”, in which case a two dimensional EFIT output g-file is used to specify the original axi-symmetric equilibrium. This equilibrium data and file format are widely used across multiple machines, but many alternative formats are also supported by GPEC. It is worth noting that significant differences between kinetic EFIT equilibria and the more simple non-kinetic EFITs has been noted. Obtaining the best 2D equilibrium data possible is encouraged for detailed calculations.</p>
<p>If kinetic effect are being included (via kin_flag in DCON or eny use of PENTRC), the kinetic profiles are also required. The <a class="reference external" href="https://docs.google.com/document/d/1qSUjJZYmET8-X08rRGBT6L_9D9fzEN_zCV75OX_ZbZk/edit?usp=sharing">OMFIT tutorial</a> details the necessary profiles and ascii file format required. Whenever possible, it is encouraged to use profiles consistent with the 2D equilibrium (especially if it is a kinetic EFIT).</p>
<p>The final input is the 3D “error field” data. The input data can be again read from a file, and accepts a small number of select formats. These files must specify the external field on the surface of the GPEC plasma boundary defined by the psihigh variable in equil.in. This means that the data must be pre-processed using knowledge of both the non-axisymmetric external field (applied and/or intrinsic), the same equilibrium used in the GPEC corresponding calculation, and the exact magnetic surface used in that calculation. This requirement of coordination by the user is an <em>easy pitfall for the un-wary</em>. If utilizing this method, be sure that all work is consistent! To avoid the pitfalls associated with the above method a in-house Biot-Savart module that contains various coil geometries has been added as of GPEC 2.00. Using the coil_flag in gpec.in will result in the reading of yet another input file “coil.in” and the fields from the coils/currents specified therein will be calculated on the appropriate surface. Finally, the harmonic_flag allows users to apply a set amplitude harmonic on the boundary. All the 3D field input may be used (or not) in any combination, and the total boundary condition will be a sum of those used.</p>
<section id="manual-examples">
<h2>Manual Examples<a class="headerlink" href="#manual-examples" title="Permalink to this heading">¶</a></h2>
<p>The GPEC repository contains a number of examples intended to provide both consistent regression testing and a useful reseource for users looking to manually run straightforward examples. These examples are located in $GPECHOME/docs/examples, and contain all the necessary inputs and namelists to run the appropriate suite of codes. Ideal and kinetic examples use dcon, gpec, and pentrc. Resistive examples contain the necessary inputs to run dcon, rdcon, rmatch and gpec.</p>
<p>Example console commands and output are given below.</p>
<ul class="simple">
<li><p><a class="reference internal" href="examples.html#diiid-ideal-example"><span class="std std-ref">DIII-D Ideal Example</span></a></p></li>
</ul>
</section>
</section>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/index.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2015, PPPL.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>