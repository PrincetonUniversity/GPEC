# This is the makefile for ipec on LinuxIntel computers.

FFLAGS = -I../equil -g
F90 = ifort $(FFLAGS)

.f.o:
	$(F90) -c $*.f

LIBDIR = \
	-L$(MKLHOME)/lib/64 \
	-L../lib/LinuxIntel

LIBS = \
	$(LIBDIR) \
	-llsode \
	-lequil \
	-lvac \
	-lguide \
	-lmkl_ipf \
	-lmkl_lapack \
	-lmkl_lapack32 \
	-lmkl_lapack64 \
	-lmkl_i2p \
	-lmkl_ias \
	-lmkl_solver \
	-lvml \
	-lmkl_vml_i2p \
	-lmkl

OBJS = \
	ipglobal.o \
	ismath.o \
	idcon.o \
	ipeq.o \
	ipresp.o \
	ipdiag.o \
	ipvacuum.o \
	ipout.o \
	ipec.o

ipec: $(OBJS)
	$(F90) -o ipec $(OBJS) $(LIBS)

# dependencies

ismath.o : ipglobal.o
idcon.o: ismath.o
ipeq.o: idcon.o ismath.o
ipresp.o: ipeq.o
ipvacuum.o : ipeq.o

ipdiag.o: ipresp.o ipvacuum.o
ipout.o: ipresp.o ipvacuum.o
ipec.o: ipdiag.o ipout.o

clean:
	rm -f *.o *.mod *.out *.bin ipec