<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pypec.modplot &mdash; GPEC 3.0.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="GPEC 3.0.0 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../../index.html"><img src="../../_static/logo.png" border="0" alt="py4sci"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>

          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for pypec.modplot</h1><div class="highlight"><pre>
<span class="c">#!/usr/local/env python</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">:mod:`pypec.modplot` -- matplotlib Customizations</span>
<span class="sd">=================================================</span>

<span class="sd">Collection of modified matplotlib functions and objects.</span>

<span class="sd">Examples</span>
<span class="sd">--------</span>

<span class="sd">Plot complex arguments.</span>

<span class="sd">&gt;&gt;&gt; f,ax = subplots()</span>
<span class="sd">&gt;&gt;&gt; lines = ax.plot(np.arange(10)*(1+0.5j),label=&#39;test&#39;)</span>
<span class="sd">&gt;&gt;&gt; pyplot.show()</span>

<span class="sd">Automatically resize plots to fit labels.</span>

<span class="sd">&gt;&gt;&gt; xlbl = ax.set_xlabel(&#39;X AXIS&#39;)</span>

<span class="sd">Plot huge data sets quickly.</span>

<span class="sd">&gt;&gt;&gt; x = np.linspace(0,9,1e5)</span>
<span class="sd">&gt;&gt;&gt; data = np.arange(1e5)/1.5e4+(np.random.rand(1e5)-0.5)</span>
<span class="sd">&gt;&gt;&gt; newline = ax.plot(x,data,label=&#39;large data set&#39;)</span>

<span class="sd">This plots a line capped at 1000-pts by default. The maximum number </span>
<span class="sd">of points is maintained as you manipulate the axis, so zooming</span>
<span class="sd">in will provide you with new points and increased detail until the</span>
<span class="sd">window samples fewer than that many points in the orginal data. The</span>
<span class="sd">first two lines, for instance, contain only their original 10 points</span>
<span class="sd">(not 1000 interpolated points). </span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c">#standard matplotlib modules</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>                       <span class="c"># standard plotting library</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.axes_grid1</span> <span class="kn">import</span> <span class="n">make_axes_locatable</span>	<span class="c">#for splitting axes</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
<span class="kn">import</span> <span class="nn">matplotlib.gridspec</span> <span class="kn">as</span> <span class="nn">gridspec</span>

<span class="c"># standard python modules</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">copy</span><span class="o">,</span><span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>                      <span class="c"># math</span>
<span class="kn">from</span> <span class="nn">scipy.interpolate</span> <span class="kn">import</span> <span class="n">interp1d</span>  <span class="c"># math</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">MethodType</span>            <span class="c"># to modify instances</span>

<span class="c"># Want seperate ID pyplot module for my hacks</span>
<span class="c"># so this module does not change global matplotlib,pyplot,pylab,etc.</span>
<span class="c"># Issue is import matplotlib imports many modules... all intertwined.</span>
<span class="c"># METHOD 1</span>
<span class="c">#import imp #built in method for assigning IDs</span>
<span class="c">#mfile,mpath,mdesc = imp.find_module(&#39;matplotlib&#39;)</span>
<span class="c">#pyplot = imp.load_module(&#39;modpyplot&#39;, *imp.find_module(&#39;pyplot&#39;,[mpath]))</span>
<span class="c"># Method 2</span>
<span class="c">#save = sys.modules.pop(&#39;matplotlib.pyplot&#39;, None) </span>
<span class="c">#import matplotlib.pyplot as pyplot</span>
<span class="c">#sys.modules[&#39;matplotlib.pyplot&#39;] = save</span>

<span class="c"># matplotlib modifications</span>
<span class="k">try</span><span class="p">:</span>
	<span class="n">interactive</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">is_interactive</span><span class="p">()</span>
	<span class="kn">import</span> <span class="nn">seaborn</span>
	<span class="n">seaborn</span><span class="o">.</span><span class="n">reset_orig</span><span class="p">()</span>
	<span class="n">matplotlib</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="n">interactive</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
	<span class="n">seaborn</span> <span class="o">=</span> <span class="bp">None</span>
<span class="c">#override user preferences from ~/.matplotlib/matplotlibrc file.</span>
<span class="c">#really should define new functions</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;figure.autolayout&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span> <span class="c"># Necessary for tight_layout</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;legend.frameon&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;legend.loc&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;best&#39;</span>

<span class="n">linestyles</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;-&#39;</span> <span class="p">,</span> <span class="s">&#39;--&#39;</span> <span class="p">,</span> <span class="s">&#39;-.&#39;</span> <span class="p">,</span> <span class="s">&#39;:&#39;</span> <span class="p">,</span> <span class="s">&#39;None&#39;</span> <span class="p">,</span> <span class="s">&#39; &#39;</span> <span class="p">,</span><span class="s">&#39;&#39;</span> <span class="p">]</span>
<span class="n">show</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">show</span>
<span class="n">draw</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">draw</span>


<span class="c">########################################### some figure sizes (journal defualts)</span>

<span class="n">rcp_size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;figure.figsize&#39;</span><span class="p">])</span>
<span class="n">pop_size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.346</span><span class="p">,</span><span class="mf">3.346</span><span class="p">])</span> <span class="c">#single column. Do *2 for double</span>

<span class="c">########################################### default colormaps</span>

<span class="kn">import</span> <span class="nn">colormaps</span> <span class="kn">as</span> <span class="nn">cmaps</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;magma&#39;</span><span class="p">,</span><span class="s">&#39;inferno&#39;</span><span class="p">,</span><span class="s">&#39;plasma&#39;</span><span class="p">,</span><span class="s">&#39;viridis&#39;</span><span class="p">]:</span>
	<span class="n">pyplot</span><span class="o">.</span><span class="n">register_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmaps</span><span class="o">.</span><span class="n">cmaps</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
	<span class="n">pyplot</span><span class="o">.</span><span class="n">register_cmap</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">k</span><span class="o">+</span><span class="s">&#39;_r&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmaps</span><span class="o">.</span><span class="n">cmaps</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="s">&#39;_r&#39;</span><span class="p">])</span>
<span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="n">cmaps</span><span class="o">.</span><span class="n">cmaps</span><span class="p">[</span><span class="s">&#39;viridis&#39;</span><span class="p">])</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c">########################################### default colormaps</span>

<div class="viewcode-block" id="png_to_gif"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.png_to_gif">[docs]</a><span class="k">def</span> <span class="nf">png_to_gif</span><span class="p">(</span><span class="n">files</span><span class="p">,</span><span class="n">gif_file</span><span class="p">,</span><span class="n">delay</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">clean</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;gif_file should end in .gif&quot;&quot;&quot;</span>
	<span class="n">gif_file</span> <span class="o">=</span> <span class="n">gif_file</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">&#39;.gif&#39;</span><span class="p">)</span>
	<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;convert -delay {d} -loop {l} {i} {o}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span><span class="n">l</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">files</span><span class="p">),</span><span class="n">o</span><span class="o">=</span><span class="n">gif_file</span><span class="o">+</span><span class="s">&#39;.gif&#39;</span><span class="p">))</span>
	<span class="k">if</span> <span class="n">clean</span><span class="p">:</span>
		<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;zip -j {zipfile} {files}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">zipfile</span><span class="o">=</span><span class="n">gif_file</span><span class="o">+</span><span class="s">&#39;.zip&#39;</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">files</span><span class="p">)))</span>
		<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;rm {files}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">files</span><span class="p">)))</span>
		
	<span class="k">return</span>

<span class="c">########################################### Custom Styles</span>
</div>
<div class="viewcode-block" id="set_style"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.set_style">[docs]</a><span class="k">def</span> <span class="nf">set_style</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">rc</span><span class="o">=</span><span class="p">{}):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Seaborn set_style with additional &#39;thick&#39;,</span>
<span class="sd">	</span>
<span class="sd">	Thick (thin) style multiplies rcParams axes.linewidth, lines.linewidth,</span>
<span class="sd">	xtick.major.width, xtick.minor.width, ytick.major.width, and </span>
<span class="sd">	ytick.minor.width by 2 (0.5).</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">style</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;thick&#39;</span><span class="p">,</span><span class="s">&#39;thin&#39;</span><span class="p">]:</span>
		<span class="k">if</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;normal&#39;</span><span class="p">:</span>
			<span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;400&#39;</span>
		<span class="k">elif</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">]</span><span class="o">==</span><span class="s">&#39;bold&#39;</span><span class="p">:</span>
			<span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;700&#39;</span>
		<span class="k">if</span> <span class="n">style</span> <span class="o">==</span><span class="s">&#39;thick&#39;</span><span class="p">:</span>
			<span class="n">fac</span> <span class="o">=</span> <span class="mi">3</span><span class="o">/</span><span class="mf">2.</span>
			<span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">min</span><span class="p">((</span><span class="mi">900</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">])</span><span class="o">+</span><span class="mi">200</span><span class="p">)))</span>
		<span class="k">elif</span> <span class="n">style</span><span class="o">==</span><span class="s">&#39;thin&#39;</span><span class="p">:</span>
			<span class="n">fac</span> <span class="o">=</span> <span class="mf">2.</span><span class="o">/</span><span class="mi">3</span>
			<span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">])</span><span class="o">-</span><span class="mi">200</span><span class="p">)))</span>
		
		<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
			<span class="k">if</span> <span class="s">&#39;weight&#39;</span> <span class="ow">in</span> <span class="n">k</span><span class="p">:</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.weight&#39;</span><span class="p">]</span>
		
		<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">dict</span><span class="p">(</span><span class="n">rc</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
			<span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
		
		<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;axes.linewidth&#39;</span><span class="p">,</span><span class="s">&#39;lines.linewidth&#39;</span><span class="p">,</span><span class="s">&#39;xtick.major.width&#39;</span><span class="p">,</span>
				  <span class="s">&#39;xtick.minor.width&#39;</span><span class="p">,</span><span class="s">&#39;ytick.major.width&#39;</span><span class="p">,</span><span class="s">&#39;ytick.minor.width&#39;</span><span class="p">]:</span>
			<span class="n">pyplot</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">*=</span> <span class="n">fac</span>
		
	<span class="k">else</span><span class="p">:</span>
		<span class="n">seaborn</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="n">style</span><span class="p">,</span><span class="n">rc</span><span class="p">)</span>
	
	<span class="k">return</span>


<span class="c">########################################### modified pyplot functions</span>
</div>
<div class="viewcode-block" id="subplots"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.subplots">[docs]</a><span class="k">def</span> <span class="nf">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">squeeze</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">autosize</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
			 <span class="n">subplot_kw</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">powerlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">useOffset</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">nybins</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">nxbins</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
			 <span class="o">**</span><span class="n">fig_kw</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Matplotlib subplots with default figsize = rcp_size*[ncols,nrows]</span>
<span class="sd">	fig_kw.setdefault(&#39;figsize&#39;,figsize). </span>

<span class="sd">	Additional Key Word Arguments:</span>
<span class="sd">	  powlim    : tuple. </span>
<span class="sd">	    Axis labels use scientific notion above 10^power.</span>
<span class="sd">	  useOffset : bool. </span>
<span class="sd">	    Axis labels use offset if range&lt;&lt;average.</span>
<span class="sd">        </span>
<span class="sd">	Accepts standargs args and kwargs for pyplot.subplots.</span>
<span class="sd">    </span>

<span class="sd">    &quot;&quot;&quot;</span>
	<span class="n">figsize</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;figure.figsize&#39;</span><span class="p">])</span><span class="o">*</span><span class="p">[</span><span class="n">ncols</span><span class="p">,</span><span class="n">nrows</span><span class="p">]</span>
	<span class="k">if</span> <span class="n">autosize</span><span class="p">:</span> <span class="n">fig_kw</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">&#39;figsize&#39;</span><span class="p">,</span><span class="n">figsize</span><span class="p">)</span>
	<span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="n">nrows</span><span class="p">,</span><span class="n">ncols</span><span class="o">=</span><span class="n">ncols</span><span class="p">,</span><span class="n">sharex</span><span class="o">=</span><span class="n">sharex</span><span class="p">,</span><span class="n">sharey</span><span class="o">=</span><span class="n">sharey</span><span class="p">,</span><span class="n">squeeze</span><span class="o">=</span><span class="n">squeeze</span><span class="p">,</span><span class="n">subplot_kw</span><span class="o">=</span><span class="n">subplot_kw</span><span class="p">,</span><span class="o">**</span><span class="n">fig_kw</span><span class="p">)</span>
	<span class="c"># customize axes and figure</span>
	<span class="k">if</span> <span class="n">nybins</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
		   <span class="n">a</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="n">nbins</span><span class="o">=</span><span class="n">nybins</span><span class="p">))</span>
	<span class="k">if</span> <span class="n">nxbins</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">flat</span><span class="p">:</span>
		   <span class="n">a</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">MaxNLocator</span><span class="p">(</span><span class="n">nbins</span><span class="o">=</span><span class="n">nxbins</span><span class="p">))</span>
	<span class="n">f</span> <span class="o">=</span> <span class="n">_modfigure</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
	
	<span class="k">return</span> <span class="n">f</span><span class="p">,</span><span class="n">ax</span></div>
<span class="n">subplots</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">+=</span> <span class="s">&#39;ORIGINAL DOCUMENTATION </span><span class="se">\n\n</span><span class="s">&#39;</span><span class="o">+</span><span class="n">pyplot</span><span class="o">.</span><span class="n">subplots</span><span class="o">.</span><span class="n">__doc__</span>

<div class="viewcode-block" id="figure"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.figure">[docs]</a><span class="k">def</span> <span class="nf">figure</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">FigureClass</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
	<span class="n">f</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">num</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="n">edgecolor</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="n">frameon</span><span class="p">,</span> <span class="n">FigureClass</span><span class="o">=</span><span class="n">FigureClass</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
	<span class="n">f</span> <span class="o">=</span> <span class="n">_modfigure</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">f</span>
</div>
<div class="viewcode-block" id="colorbar"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.colorbar">[docs]</a><span class="k">def</span> <span class="nf">colorbar</span><span class="p">(</span><span class="n">mappable</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">use_gridspec</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Modified pyplot colorbar for default use_gridspec=True.</span>
<span class="sd">	</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">cb</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">mappable</span><span class="o">=</span><span class="n">mappable</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">use_gridspec</span><span class="o">=</span><span class="n">use_gridspec</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">cb</span></div>
<span class="n">colorbar</span><span class="o">.</span><span class="n">__doc__</span><span class="o">+=</span><span class="s">&#39;ORIGINAL DOCUMENTATION </span><span class="se">\n\n</span><span class="s">&#39;</span><span class="o">+</span><span class="n">pyplot</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">__doc__</span>





<span class="c">########################################### Figure object modifications</span>

<span class="c"># internal function to apply customizations post initialization</span>
<span class="k">def</span> <span class="nf">_modfigure</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Modplot figure object modifications. These include:</span>
<span class="sd">	    1) canvas connection to modplot.key_press event funtion</span>

<span class="sd">	Arguments:</span>
<span class="sd">	  f : Figure object.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">f</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;key_press_event&#39;</span><span class="p">,</span><span class="n">onkey</span><span class="p">)</span> <span class="c">#custom hotkeys</span>
	<span class="c">#pppl Figure base doesn&#39;t have show from nomachine for some reason</span>
	<span class="c">#f._orig_show = MethodType(copy.deepcopy(f.show),f)</span>
	<span class="c">#f.show = MethodType(_figure_show,f)</span>
	
	<span class="k">return</span> <span class="n">f</span>

<span class="c"># customize axes when added	</span>
<span class="k">def</span> <span class="nf">_figure_add_subplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_orig_add_subplot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">_modaxes</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ax</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="p">,</span><span class="s">&quot;_orig_add_subplot&quot;</span><span class="p">):</span> <span class="c">#prevent recursion when reloaded</span>
    <span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">_orig_add_subplot</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">add_subplot</span> <span class="o">=</span> <span class="n">_figure_add_subplot</span>

<span class="c"># tight_layout when show</span>
<span class="k">def</span> <span class="nf">_figure_show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_orig_show</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="n">_figure_show</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="o">.</span><span class="n">__doc__</span>
<span class="c">#pppl Figure base doesn&#39;t have show from nomachine or 2.7.2 for some reason</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="p">,</span><span class="s">&quot;_orig_show&quot;</span><span class="p">):</span> <span class="c">#prevent recursion when reloaded</span>
	<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">&lt;</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span>
		<span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">_orig_show</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">_orig_show</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">show</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">show</span> <span class="o">=</span> <span class="n">_figure_show</span>

<span class="c">#colorbars are axes (for tight_layout)</span>
<span class="k">def</span> <span class="nf">_figure_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mappable</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">use_gridspec</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
	<span class="n">cb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_orig_colorbar</span><span class="p">(</span><span class="n">mappable</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
							 <span class="n">use_gridspec</span><span class="o">=</span><span class="n">use_gridspec</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">cb</span>
<span class="n">_figure_colorbar</span><span class="o">.</span><span class="n">__doc__</span><span class="o">=</span><span class="s">&#39;Modified default use_gridspec=True. </span><span class="se">\n</span><span class="s"> - </span><span class="se">\n</span><span class="s">&#39;</span><span class="o">+</span><span class="n">pyplot</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">__doc__</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="p">,</span><span class="s">&quot;_orig_colorbar&quot;</span><span class="p">):</span> <span class="c">#prevent recursion when reloaded</span>
    <span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">_orig_colorbar</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">colorbar</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="n">_figure_colorbar</span>


<span class="c"># new method to print text file of lines in figure</span>
<div class="viewcode-block" id="printlines"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.printlines">[docs]</a><span class="k">def</span> <span class="nf">printlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">,</span><span class="n">labeled_only</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">squeeze</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Print all data in line plot(s) to text file.The x values </span>
<span class="sd">	will be taken from the line with the greatest number of</span>
<span class="sd">	points in the (first) axis, and other lines are interpolated</span>
<span class="sd">	if their x values do not match. Column lables are the</span>
<span class="sd">	line labels and xlabel.</span>

<span class="sd">	Arguments:</span>
<span class="sd">	  filename : str. </span>
<span class="sd">	    Path to print to.</span>
<span class="sd">	</span>
<span class="sd">	Key Word Arguments:</span>
<span class="sd">	  labeled_only : bool</span>
<span class="sd">	    Only print labeled lines to file.</span>
<span class="sd">	  squeeze : bool.</span>
<span class="sd">	    Print lines from all axes in a single table.</span>
<span class="sd"> </span>
<span class="sd">	returns</span>
<span class="sd">	  bool. </span>
<span class="sd">	    True.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
		<span class="n">data</span><span class="o">=</span><span class="p">[]</span>

		<span class="c"># Try to avoid clutter in squeeze</span>
		<span class="n">samettle</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="n">sameylbl</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="k">if</span> <span class="n">squeeze</span><span class="p">:</span>
			<span class="n">ylbl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_ylabel</span><span class="p">()</span>
			<span class="n">ttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_title</span><span class="p">()</span>
			<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes</span><span class="p">():</span>
				<span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">get_ylabel</span><span class="p">()</span> <span class="o">!=</span> <span class="n">ylbl</span><span class="p">:</span>
					<span class="n">sameylbl</span> <span class="o">=</span> <span class="bp">False</span>
				<span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">get_title</span><span class="p">()</span> <span class="o">!=</span> <span class="n">ttle</span><span class="p">:</span>
					<span class="n">samettle</span> <span class="o">=</span> <span class="bp">False</span>
			<span class="k">if</span> <span class="n">samettle</span><span class="p">:</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ttle</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">sameylbl</span><span class="p">:</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;  ylabel = &#39;</span><span class="o">+</span><span class="n">ylbl</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="s">&#39; \${}&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes</span><span class="p">():</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span> <span class="k">continue</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">squeeze</span><span class="p">:</span> 
				<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">+</span><span class="n">a</span><span class="o">.</span><span class="n">get_title</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="p">)</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;  ylabel = &#39;</span><span class="o">+</span><span class="n">a</span><span class="o">.</span><span class="n">get_ylabel</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="s">&#39; \${}&#39;</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="p">)</span>
			<span class="c"># use x-axis from line with greatest number of pts</span>
			<span class="n">xs</span> <span class="o">=</span> <span class="p">[]</span>
			<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
				<span class="n">label</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="s">&#39; \${}&#39;</span><span class="p">)</span> 
				<span class="k">if</span> <span class="n">labeled_only</span> <span class="ow">and</span> <span class="p">(</span><span class="n">label</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">label</span><span class="p">):</span>
					<span class="k">continue</span>
				<span class="n">xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">())</span>
			<span class="n">longest</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">])</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span> 
				<span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xs</span><span class="p">[</span><span class="n">longest</span><span class="p">])</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;{0:&gt;25s}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">get_xlabel</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="s">&#39; \${}&#39;</span><span class="p">)))</span>
			<span class="c"># label and extrapolate each line</span>
			<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
				<span class="n">label</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="s">&#39; \${}&#39;</span><span class="p">)</span> 
				<span class="k">if</span> <span class="n">labeled_only</span> <span class="ow">and</span> <span class="p">(</span><span class="n">label</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">label</span><span class="p">):</span>
					<span class="k">continue</span>
				<span class="k">if</span> <span class="n">squeeze</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">sameylbl</span><span class="p">:</span> 
					<span class="n">label</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">get_ylabel</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="s">&#39; \${}&#39;</span><span class="p">)</span><span class="o">+</span><span class="n">label</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;{0:&gt;25s}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">label</span><span class="p">))</span>
				<span class="c"># standard axis</span>
				<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">(),</span><span class="n">line</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">()</span>
				<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">x</span><span class="o">!=</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
					<span class="n">fit</span> <span class="o">=</span> <span class="n">interp1d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">bounds_error</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">fill_value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
					<span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">squeeze</span><span class="p">:</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s"> &#39;</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">iscomplex</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
					<span class="k">print</span><span class="p">(</span><span class="s">&quot;WARNING: Complex data may be lost.&quot;</span><span class="p">)</span>
				<span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">real</span><span class="o">.</span><span class="n">T</span>
				<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
					<span class="n">row</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%24.9E</span><span class="s">&#39;</span><span class="p">)</span>
					<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s"> &#39;</span><span class="p">)</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">squeeze</span><span class="p">:</span>
			<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s"> &#39;</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">iscomplex</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
				<span class="k">print</span><span class="p">(</span><span class="s">&quot;WARNING: Complex data may be lost.&quot;</span><span class="p">)</span>
			<span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">real</span><span class="o">.</span><span class="n">T</span>
			<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
				<span class="n">row</span><span class="o">.</span><span class="n">tofile</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%24.9E</span><span class="s">&#39;</span><span class="p">)</span>
				<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s"> &#39;</span><span class="p">)</span>
			<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&quot;Wrote lines to &quot;</span><span class="o">+</span><span class="n">filename</span><span class="p">)</span>
	<span class="k">return</span> <span class="bp">True</span></div>
<span class="n">pyplot</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">printlines</span> <span class="o">=</span> <span class="n">printlines</span>


<span class="c">########################################### Axes object modifications</span>


<span class="c"># internal function to apply customizations post initialization</span>
<span class="k">def</span> <span class="nf">_modaxes</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span><span class="n">useOffset</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Modplot axis object modifications. These include:</span>
<span class="sd">	    1) Optional offset</span>
<span class="sd">	    2) Ticker format power lims (-3,3)</span>
<span class="sd">	    3) New downsample instance, connected to x-axis rescale</span>
<span class="sd">	    4) New plot instance with complex arg handling</span>
<span class="sd">	    </span>
<span class="sd">	Arguments:   </span>
<span class="sd">	  ax        : obj. </span>
<span class="sd">	    Axes object.</span>
<span class="sd">	Key Word Arguments:</span>
<span class="sd">	  useOffset : bool. </span>
<span class="sd">	    Offset axis zero.</span>

<span class="sd">	returns</span>
<span class="sd">	  Axis object.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">afmt</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">ScalarFormatter</span><span class="p">(</span><span class="n">useOffset</span><span class="o">=</span><span class="n">useOffset</span><span class="p">)</span>
	<span class="n">afmt</span><span class="o">.</span><span class="n">set_powerlimits</span><span class="p">((</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;xlim_changed&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">.</span><span class="n">downsample</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">afmt</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">afmt</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">ax</span>
	
<span class="c"># down sample all lines in axes</span>
<span class="k">def</span> <span class="nf">_axes_downsample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ax</span><span class="p">,</span><span class="n">npts</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Attempt to down sample original data in</span>
<span class="sd">	each Line2D object in lines.</span>

<span class="sd">	Arguments: </span>
<span class="sd">	  ax   : obj. </span>
<span class="sd">	    Initialized Axes object containing lines</span>
<span class="sd">	Key Word Arguments: </span>
<span class="sd">	  npts : int. </span>
<span class="sd">	    Number of points plotted in each line</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">l</span><span class="o">.</span><span class="n">downsample</span><span class="p">(</span><span class="n">npts</span><span class="o">=</span><span class="n">npts</span><span class="p">)</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="k">pass</span>
	<span class="c">#draw()</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">Axes</span><span class="o">.</span><span class="n">downsample</span> <span class="o">=</span> <span class="n">_axes_downsample</span>

<span class="c"># complex value plotting</span>
<span class="k">def</span> <span class="nf">_axes_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Modified axes line plotting, with suport for complex plotting.</span>
<span class="sd">	Original matplotlib Axes plot method now located at _orig_plot.</span>
<span class="sd">	All original plot args and kwargs accepted.</span>
<span class="sd">	</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">linestyles</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">lineStyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
	<span class="n">newargs</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">_real_arg</span><span class="p">,</span><span class="n">args</span><span class="p">)</span>
	<span class="n">lines1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_orig_plot</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
	<span class="n">lines2</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="nb">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">iscomplex</span><span class="p">(</span><span class="n">arg</span><span class="p">)))</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]):</span>
		<span class="n">newargs</span> <span class="o">=</span> <span class="p">[</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span> <span class="n">newargs</span><span class="o">+=</span><span class="nb">map</span><span class="p">(</span><span class="n">_imag_arg</span><span class="p">,</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
		<span class="n">lines2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_orig_plot</span><span class="p">(</span><span class="o">*</span><span class="n">newargs</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
		<span class="k">for</span> <span class="n">l1</span><span class="p">,</span><span class="n">l2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">lines1</span><span class="p">,</span><span class="n">lines2</span><span class="p">):</span> 
			<span class="n">l2</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">l1</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
			<span class="n">ils</span> <span class="o">=</span> <span class="n">linestyles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">l1</span><span class="o">.</span><span class="n">get_linestyle</span><span class="p">())</span>
			<span class="n">l2</span><span class="o">.</span><span class="n">set_linestyle</span><span class="p">(</span><span class="n">linestyles</span><span class="p">[</span><span class="n">ils</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
			<span class="n">l2</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">r&#39;$\Im$ &#39;</span><span class="o">+</span><span class="n">l1</span><span class="o">.</span><span class="n">get_label</span><span class="p">())</span>
			<span class="n">l1</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">r&#39;$\Re$ &#39;</span><span class="o">+</span><span class="n">l1</span><span class="o">.</span><span class="n">get_label</span><span class="p">())</span>
		<span class="n">pyplot</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span><span class="o">/</span><span class="mi">6</span><span class="p">))</span>
	<span class="c">#draw()</span>
	<span class="k">return</span> <span class="n">lines1</span><span class="o">+</span><span class="n">lines2</span>
<span class="n">_axes_plot</span><span class="o">.</span><span class="n">__doc__</span><span class="o">+=</span><span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">__doc__</span>
<span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span><span class="s">&quot;_orig_plot&quot;</span><span class="p">):</span> <span class="c">#prevent recursion when reloaded</span>
    <span class="n">pyplot</span><span class="o">.</span><span class="n">Axes</span><span class="o">.</span><span class="n">_orig_plot</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pyplot</span><span class="o">.</span><span class="n">Axes</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">Axes</span><span class="o">.</span><span class="n">plot</span> <span class="o">=</span> <span class="n">_axes_plot</span>


<span class="k">def</span> <span class="nf">_imag_arg</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
	<span class="c">#if type(arg)==str:</span>
	<span class="c">#	return arg</span>
	<span class="c">#else:</span>
	<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">iscomplex</span><span class="p">(</span><span class="n">arg</span><span class="p">)):</span>
		<span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">imag</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">arg</span>

<span class="k">def</span> <span class="nf">_real_arg</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
	<span class="c">#if type(arg)==str:</span>
	<span class="c">#	return arg</span>
	<span class="c">#else:</span>
	<span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">iscomplex</span><span class="p">(</span><span class="n">arg</span><span class="p">)):</span>
		<span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">arg</span>

<span class="k">def</span> <span class="nf">_center_axes</span><span class="p">(</span><span class="n">ax</span><span class="p">):</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s">&#39;none&#39;</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="s">&#39;center&#39;</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s">&#39;none&#39;</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_smart_bounds</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_smart_bounds</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s">&#39;bottom&#39;</span><span class="p">)</span>
	<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">Axes</span><span class="o">.</span><span class="n">center_axes</span> <span class="o">=</span> <span class="n">_center_axes</span>


<span class="c">########################################### modified pyplot functions</span>

<span class="c"># downsample data from the full set used to initialize the line</span>
<div class="viewcode-block" id="line_downsample"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.line_downsample">[docs]</a><span class="k">def</span> <span class="nf">line_downsample</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">npts</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Downsample line data for increased plotting speed.</span>

<span class="sd">	Key Word Arguments: </span>
<span class="sd">	  npts : int. </span>
<span class="sd">	    Number of data points within axes xlims.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">lims</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="s">&#39;_xinit&#39;</span><span class="p">):</span>
		<span class="n">line</span><span class="o">.</span><span class="n">_xinit</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">()</span>
		<span class="n">line</span><span class="o">.</span><span class="n">_yinit</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">()</span>
	<span class="n">window</span> <span class="o">=</span> <span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">_xinit</span><span class="o">&gt;=</span><span class="n">lims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">_xinit</span><span class="o">&lt;=</span><span class="n">lims</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
	<span class="c">#extend out edge</span>
	<span class="n">window</span><span class="p">[</span><span class="n">window</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
	<span class="n">window</span><span class="p">[</span><span class="n">window</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span><span class="o">+</span><span class="n">window</span><span class="p">[</span><span class="n">window</span><span class="o">.</span><span class="n">argmax</span><span class="p">():]</span><span class="o">.</span><span class="n">argmin</span><span class="p">()]</span><span class="o">=</span><span class="bp">True</span>
	<span class="n">step</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">_xinit</span><span class="p">[</span><span class="n">window</span><span class="p">]</span><span class="o">.</span><span class="n">size</span><span class="o">/</span><span class="n">npts</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
	<span class="n">line</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">_xinit</span><span class="p">[</span><span class="n">window</span><span class="p">][::</span><span class="n">step</span><span class="p">])</span>
	<span class="n">line</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">_yinit</span><span class="p">[</span><span class="n">window</span><span class="p">][::</span><span class="n">step</span><span class="p">])</span></div>
<span class="n">pyplot</span><span class="o">.</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="o">.</span><span class="n">downsample</span> <span class="o">=</span> <span class="n">line_downsample</span>





<span class="c">########################################### my own functions</span>

	
<div class="viewcode-block" id="plot_axes"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.plot_axes">[docs]</a><span class="k">def</span> <span class="nf">plot_axes</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">geometry</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Re-create a given axis in a new figure. This allows, for instance,</span>
<span class="sd">	a subplot to be moved to its own figure where it can be manipulated</span>
<span class="sd">	and/or saved independent of the original.</span>

<span class="sd">	Arguments:   </span>
<span class="sd">	  ax : obj. </span>
<span class="sd">	    An initialized Axes object  </span>
<span class="sd">	Key Word Arguments: </span>
<span class="sd">	  fig: obj. </span>
<span class="sd">	    A figure in which to re-create the axis</span>
<span class="sd">	  geometry : tuple. </span>
<span class="sd">	    Axes geometry of re-created axis</span>
<span class="sd">    </span>
<span class="sd">    returns    </span>
<span class="sd">	  Figure.</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
		<span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>
	<span class="n">a2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
	<span class="n">a2</span><span class="o">.</span><span class="n">set_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
	<span class="n">a2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>
<span class="c">#	for k,v in vars(ax).iteritems():</span>
<span class="c">#		if &#39;_&#39; not in k:</span>
<span class="c">#			try:</span>
<span class="c">#				setattr(ax2,k,v)</span>
<span class="c">#			except:</span>
<span class="c">#				pass</span>
	<span class="k">if</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_geometry</span><span class="p">()</span> <span class="o">!=</span> <span class="n">geometry</span> <span class="p">:</span>
		<span class="n">a2</span><span class="o">.</span><span class="n">change_geometry</span><span class="p">(</span><span class="o">*</span><span class="n">geometry</span><span class="p">)</span>
<span class="c">#	draw()</span>
	<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
	<span class="k">return</span> <span class="n">fig</span>
</div>
<div class="viewcode-block" id="xyaxes"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.xyaxes">[docs]</a><span class="k">def</span> <span class="nf">xyaxes</span><span class="p">(</span><span class="n">axes</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Plot hline and vline through (0,0).</span>
<span class="sd">	</span>
<span class="sd">	**Arguments:**</span>
<span class="sd">		- axes : obj. Matplotlib Axes object.</span>
<span class="sd">		</span>
<span class="sd">	**key Word Arguments:**</span>
<span class="sd">		- x : bool. Draw hline</span>
<span class="sd">		- y : bool. Draw vline</span>
<span class="sd">	</span>
<span class="sd">	**Returns:**</span>
<span class="sd">		- bool.</span>
<span class="sd">		</span>
<span class="sd">	All other kwargs passed to hlines and vlines functions.</span>
<span class="sd">	</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">y</span><span class="p">:</span>
		<span class="n">ylim</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
		<span class="n">axes</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">*</span><span class="n">ylim</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
		<span class="n">axes</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">ylim</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">x</span><span class="p">:</span>
		<span class="n">xlim</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>
		<span class="n">axes</span><span class="o">.</span><span class="n">hlines</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">*</span><span class="n">xlim</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
		<span class="n">axes</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">xlim</span><span class="p">)</span>
	<span class="k">return</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="set_linearray"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.set_linearray">[docs]</a><span class="k">def</span> <span class="nf">set_linearray</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span><span class="n">values</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set colors of lines to colormaping of values.</span>
<span class="sd">    </span>
<span class="sd">    Other good sequential colormaps are YlOrBr and autumn.</span>
<span class="sd">    A good diverging colormap is bwr.</span>
<span class="sd">    </span>
<span class="sd">    **Arguments:**</span>
<span class="sd">        - lines : list. Lines to get set colors.</span>
<span class="sd">    </span>
<span class="sd">    **Key Word Arguments:**</span>
<span class="sd">        - values : array like. Values corresponding to each line. Default is indexing.</span>
<span class="sd">        - cmap : str. Valid matplotlib colormap name.</span>
<span class="sd">        - vmax : float. Upper bound of colormaping.</span>
<span class="sd">        - vmin : float. Lower bound of colormaping.</span>
<span class="sd">    </span>
<span class="sd">    **Returns:**</span>
<span class="sd">        - ScalarMappable. A mapping object used for colorbars.</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">values</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
        <span class="n">values</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
    <span class="n">nm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="p">)</span>
    <span class="n">sm</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">ScalarMappable</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="n">norm</span><span class="o">=</span><span class="n">nm</span><span class="p">)</span>
    <span class="n">sm</span><span class="o">.</span><span class="n">set_array</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">sm</span><span class="o">.</span><span class="n">cmap</span><span class="p">(</span><span class="n">sm</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">l</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span><span class="n">colors</span><span class="p">):</span>
        <span class="n">l</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>    
        
    <span class="k">return</span> <span class="n">sm</span>
</div>
<div class="viewcode-block" id="onkey"><a class="viewcode-back" href="../../source_documentation.html#pypec.modplot.onkey">[docs]</a><span class="k">def</span> <span class="nf">onkey</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function to connect key_press_event events from matplotlib</span>
<span class="sd">    to custom functions.</span>

<span class="sd">    Matplotlib defaults (may be changed in matplotlibrc):</span>

<span class="sd">    keymap.fullscreen : f               # toggling</span>
<span class="sd">    keymap.home : h, r, home            # home or reset mnemonic</span>
<span class="sd">    keymap.back : left, c, backspace    # forward / backward keys to enable</span>
<span class="sd">    keymap.forward : right, v           #   left handed quick navigation</span>
<span class="sd">    keymap.pan : p                      # pan mnemonic</span>
<span class="sd">    keymap.zoom : o                     # zoom mnemonic</span>
<span class="sd">    keymap.save : s                     # saving current figure</span>
<span class="sd">    keymap.quit : ctrl+w                # close the current figure</span>
<span class="sd">    keymap.grid : g                     # switching on/off a grid in current axes</span>
<span class="sd">    keymap.yscale : l                   # toggle scaling of y-axes (&#39;log&#39;/&#39;linear&#39;)</span>
<span class="sd">    keymap.xscale : L, k                # toggle scaling of x-axes (&#39;log&#39;/&#39;linear&#39;)</span>
<span class="sd">    keymap.all_axes : a                 # enable all axes</span>

<span class="sd">    My custom function mapping:</span>

<span class="sd">    popaxes : n                         #Creates new figure with current axes</span>
<span class="sd">    tighten : t                         #Call tight_layout bound method for figure</span>

<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="o">==</span><span class="s">&#39;n&#39;</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="p">:</span>
			<span class="n">f</span> <span class="o">=</span> <span class="n">plot_axes</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="p">)</span>
	<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="o">==</span><span class="s">&#39;t&#39;</span><span class="p">:</span>
		<span class="n">f</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
		<span class="n">f</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
		<span class="n">f</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
	<span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="o">==</span><span class="s">&#39;c&#39;</span><span class="p">:</span>
		<span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">.</span><span class="n">_center_axis</span><span class="p">()</span>
	<span class="k">return</span>



	</div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>

          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, PPPL.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>