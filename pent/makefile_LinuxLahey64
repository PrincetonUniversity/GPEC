# This is the makefile for PENT on LinuxLahey computers.

FFLAGS = -I../equil -I../ipec -g

F90 = lfc $(FFLAGS)

.f.o:
	$(F90) -c $*.f

LIBDIR = \
	-L../lib/LinuxLahey64 \
	-L/usr/pppl/lff95/8.x86_64-pkgs/lapack-3.1.1.x86_64 \

LIBS = \
	$(LIBDIR) \
	-lipec \
	-llsode \
	-lequil \
	-lvac \
	-lcoil \
	-llapack \
	-lblas \

OBJS = \
	pentglobal.o \
	collision.o \
	pentio.o \
	grid.o \
	profile.o \
	energy.o \
	diagnostic.o \
	local.o \
	io.o \
	pent.o

pent: $(OBJS)
	$(F90) -o pent $(OBJS) $(LIBS)
	mkdir -p ../lib/LinuxLahey64
	ar -r ../lib/LinuxLahey64/libpent.a *.o

# dependencies

local.o: io.o
pentglobal.o: local.o
pentio.o : pentglobal.o
collision.o : pentglobal.o
grid : pentio.o
energy.o: pentglobal.o collision.o grid.o
profile.o: pentio.o grid.o energy.o
diagnostic.o: profile.o energy.o
pent.o: profile.o  diagnostic.o

clean:
	rm -f *.o *.mod *.out *.bin pent nat3
