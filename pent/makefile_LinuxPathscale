# This is the makefile for NAT3 on LinuxPathscale computers.

FFLAGS = -I../equil -I../ipec -g -m64

F90 = pathf90 $(FFLAGS)

.f.o:
	$(F90) -c $*.f

LIBDIR = \
	-L../lib/LinuxPathscale \
	-L/usr/pppl/pathscale/3.2-pkgs/acml-4.2.0/pathscale64/lib

LIBS = \
	$(LIBDIR) \
	-lipec \
	-llsode \
	-lequil \
	-lvac \
	-lcoil \
	-lacml

OBJS = \
	naglobal.o \
	naio.o \
	natorq.o \
	local.o \
	io.o \
	nat3.o \

nat3: $(OBJS)
	$(F90) -o nat3 $(OBJS) $(LIBS)
	mkdir -p ../lib/LinuxLahey64
	ar -r ../lib/LinuxLahey64/libnat3.a *.o

# dependencies

local.o: io.o
naglobal.o: local.o
naio.o : naglobal.o
natorq.o: naio.o
nat3.o: natorq.o 

clean:
	rm -f *.o *.mod *.out *.bin nat3
