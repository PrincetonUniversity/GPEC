# This is the makefile for ORBIT on LinuxIntel computers.

FFLAGS = -I../equil -g
F90 = ifort $(FFLAGS)

.f.o:
	$(F90) -c $*.f

LIBDIR = \
	-L../lib/LinuxIntel \
	-L/usr/local/lib \
	-L$(MKLHOME)/lib/64

LIBS = \
	$(LIBDIR) \
	-lequil \
	-llsode \
	-lguide \
	-lmkl_ipf \
	-lmkl_lapack \
	-lmkl_lapack32 \
	-lmkl_lapack64 \
	-lmkl_i2p \
	-lmkl_ias \
	-lmkl_solver \
	-lvml \
	-lmkl_vml_i2p \
	-lmkl

OBJS = \
	orbit_mod.o \
	restart.o \
	field.o \
	inner.o \
	outer.o \
	inner_gc.o \
	outer_gc.o \
	orbit.o

orbit: $(OBJS)
	$(F90) -o orbit $(OBJS) $(LIBS)

# dependencies

orbit_mod.o: ../equil/equil_mod.mod ../equil/equil_out_mod.mod
restart.o: orbit_mod.o
field.o: orbit_mod.o
inner.o: field.o restart.o
outer.o: field.o restart.o
inner_gc.o: field.o restart.o
outer_gc.o: field.o restart.o
orbit.o: inner.o outer.o inner_gc.o outer_gc.o

clean:
	rm -f *.o *.mod *.out *.bin orbit
