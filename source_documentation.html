<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>PYPEC Source documentation &#8212; GPEC 1.5.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><img height=40, src="_static/GPEC_logo.png">
          <!-- GPEC-->
        </a>
        <!-- <span class="navbar-text navbar-version pull-left"><b>1.5</b></span> -->
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="references.html">Cite</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="outputs.html">I/O</a></li>
                <li><a href="releases.html">Release History</a></li>
                <li><a href="dcon_readme.html">DCON</a></li>
                <li><a href="developers.html">Develop</a></li>
                <li><a href="#">Python Post Processing</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Jump to <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
            
            
            
            
            
          </ul>
           <!-- 
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
           -->
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/GPEC_logo.png" alt="Logo"/>
            </a></p><ul>
<li><a class="reference internal" href="#">PYPEC Source documentation</a><ul>
<li><a class="reference internal" href="#pypec-main-package"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec</span></code> – Main Package</a></li>
<li><a class="reference internal" href="#python-at-pppl">Python at PPPL</a><ul>
<li><a class="reference internal" href="#python-tutorials">Python Tutorials</a></li>
<li><a class="reference internal" href="#setting-your-personal-defaults">Setting Your Personal Defaults</a></li>
<li><a class="reference internal" href="#using-the-best-environment">Using the Best Environment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pypec-data-pythonic-treatment-of-scientific-data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.data</span></code> – Pythonic Treatment of Scientific Data</a><ul>
<li><a class="reference internal" href="#beginners">Beginners</a></li>
<li><a class="reference internal" href="#advanced-users">Advanced Users</a></li>
<li><a class="reference internal" href="#deprecated-ascii-interface">Deprecated ASCII Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pypec.data.DataBase"><code class="docutils literal notranslate"><span class="pre">DataBase</span></code></a><ul>
<li><a class="reference internal" href="#pypec.data.DataBase.interp"><code class="docutils literal notranslate"><span class="pre">DataBase.interp()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.DataBase.plot1d"><code class="docutils literal notranslate"><span class="pre">DataBase.plot1d()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.DataBase.plot2d"><code class="docutils literal notranslate"><span class="pre">DataBase.plot2d()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.DataBase.plot3d"><code class="docutils literal notranslate"><span class="pre">DataBase.plot3d()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.DataBase.scatter"><code class="docutils literal notranslate"><span class="pre">DataBase.scatter()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.DataBase.slice"><code class="docutils literal notranslate"><span class="pre">DataBase.slice()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pypec.data.getshot"><code class="docutils literal notranslate"><span class="pre">getshot()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.open_dataset"><code class="docutils literal notranslate"><span class="pre">open_dataset()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.plotall"><code class="docutils literal notranslate"><span class="pre">plotall()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.readall"><code class="docutils literal notranslate"><span class="pre">readall()</span></code></a></li>
<li><a class="reference internal" href="#pypec.data.write"><code class="docutils literal notranslate"><span class="pre">write()</span></code></a></li>
<li><a class="reference internal" href="#pypec-post-post-processing-fundamental-gpec-outputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.post</span></code> – Post-Processing Fundamental GPEC Outputs</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pypec.post.add_3dsurface"><code class="docutils literal notranslate"><span class="pre">add_3dsurface()</span></code></a></li>
<li><a class="reference internal" href="#pypec.post.add_fun"><code class="docutils literal notranslate"><span class="pre">add_fun()</span></code></a></li>
<li><a class="reference internal" href="#pypec.post.optimize_torque"><code class="docutils literal notranslate"><span class="pre">optimize_torque()</span></code></a></li>
<li><a class="reference internal" href="#pypec.post.update_name_conventions"><code class="docutils literal notranslate"><span class="pre">update_name_conventions()</span></code></a></li>
<li><a class="reference internal" href="#pypec-gpec-python-wrappers-for-fortran-codes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.gpec</span></code> – Python Wrappers for FORTRAN Codes</a></li>
<li><a class="reference internal" href="#pypec.gpec.InputSet"><code class="docutils literal notranslate"><span class="pre">InputSet</span></code></a></li>
<li><a class="reference internal" href="#pypec.gpec.nustarscan"><code class="docutils literal notranslate"><span class="pre">nustarscan()</span></code></a></li>
<li><a class="reference internal" href="#pypec.gpec.omegascan"><code class="docutils literal notranslate"><span class="pre">omegascan()</span></code></a></li>
<li><a class="reference internal" href="#pypec.gpec.optntv"><code class="docutils literal notranslate"><span class="pre">optntv()</span></code></a></li>
<li><a class="reference internal" href="#pypec.gpec.optpentrc"><code class="docutils literal notranslate"><span class="pre">optpentrc()</span></code></a></li>
<li><a class="reference internal" href="#pypec.gpec.run"><code class="docutils literal notranslate"><span class="pre">run()</span></code></a></li>
<li><a class="reference internal" href="#pypec-namelist-io-for-fortran-namelists"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.namelist</span></code> – IO for FORTRAN Namelists</a><ul>
<li><a class="reference internal" href="#id1">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pypec.namelist.Objectify"><code class="docutils literal notranslate"><span class="pre">Objectify</span></code></a></li>
<li><a class="reference internal" href="#pypec.namelist.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li><a class="reference internal" href="#pypec.namelist.write"><code class="docutils literal notranslate"><span class="pre">write()</span></code></a></li>
<li><a class="reference internal" href="#pypec-modplot-matplotlib-customizations"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.modplot</span></code> – matplotlib Customizations</a></li>
<li><a class="reference internal" href="#pypec.modplot.MidPointNorm"><code class="docutils literal notranslate"><span class="pre">MidPointNorm</span></code></a><ul>
<li><a class="reference internal" href="#pypec.modplot.MidPointNorm.inverse"><code class="docutils literal notranslate"><span class="pre">MidPointNorm.inverse()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pypec.modplot.add_inset_axes"><code class="docutils literal notranslate"><span class="pre">add_inset_axes()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.colorbar"><code class="docutils literal notranslate"><span class="pre">colorbar()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.figure"><code class="docutils literal notranslate"><span class="pre">figure()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.line_downsample"><code class="docutils literal notranslate"><span class="pre">line_downsample()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.onkey"><code class="docutils literal notranslate"><span class="pre">onkey()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.plot_axes"><code class="docutils literal notranslate"><span class="pre">plot_axes()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.png_to_gif"><code class="docutils literal notranslate"><span class="pre">png_to_gif()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.printlines"><code class="docutils literal notranslate"><span class="pre">printlines()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.set_linearray"><code class="docutils literal notranslate"><span class="pre">set_linearray()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.set_style"><code class="docutils literal notranslate"><span class="pre">set_style()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.shiftedColorMap"><code class="docutils literal notranslate"><span class="pre">shiftedColorMap()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.subplots"><code class="docutils literal notranslate"><span class="pre">subplots()</span></code></a></li>
<li><a class="reference internal" href="#pypec.modplot.xyaxes"><code class="docutils literal notranslate"><span class="pre">xyaxes()</span></code></a></li>
<li><a class="reference internal" href="#regression-compare-for-comparing-restults"><code class="xref py py-mod docutils literal notranslate"><span class="pre">regression.compare</span></code> – For Comparing Restults</a><ul>
<li><a class="reference internal" href="#interface">Interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-12 content" role="main">
      
  <p id="source-documentation">The recommended post processing for GPEC is now to use the devoted <span class="xref std std-ref">OMFIT module</span>.
The deprecated code below has been ported there and improved, but is included here for reference.</p>
<section id="module-pypec">
<span id="pypec-source-documentation"></span><h1>PYPEC Source documentation<a class="headerlink" href="#module-pypec" title="Permalink to this heading">¶</a></h1>
<section id="pypec-main-package">
<h2><a class="reference internal" href="#module-pypec" title="pypec"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec</span></code></a> – Main Package<a class="headerlink" href="#pypec-main-package" title="Permalink to this heading">¶</a></h2>
<p>Python modules for data visualization and postprocessing,
as well as python wrappers for GPEC and PENT.</p>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>N.C. Logan</p>
</dd>
<dt class="field-even">Location</dt>
<dd class="field-even"><p>Princeton Plasma Physics Laboratory</p>
</dd>
<dt class="field-odd">Email</dt>
<dd class="field-odd"><p><a class="reference external" href="mailto:nlogan&#37;&#52;&#48;pppl&#46;gov">nlogan<span>&#64;</span>pppl<span>&#46;</span>gov</a></p>
</dd>
</dl>
</section>
<section id="python-at-pppl">
<h2>Python at PPPL<a class="headerlink" href="#python-at-pppl" title="Permalink to this heading">¶</a></h2>
<p>To set up python on portal at PPPL, insert the
following lines into your .bashrc file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PYTHONPATH=$PYTHONPATH:/path/to/gpec
module load anaconda/2.3.0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Anaconda is the most complete and current python distribution
available at pppl. Users can also use locally built python/2.7.2, but
will loose 3D plotting capabilities and may experience problems reading
large data files.</p>
</div>
<p>Obviously, “/path/to/gpec” needs to be replaced with the path
to your installation of the GPEC package (containing the pypec directory).</p>
<p>For tcsh shell users, replace export with setenv syntax
and insert in .cshrc.</p>
<p>To put the changes into effect:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source ~/.bashrc
</pre></div>
</div>
<p>Users are further encouraged to create a matplotlib rc file in
user ~/.config/matplotlib similar to /u/nlogan/.config/matplotlib/matplotlibrc.
This file sets a number of plotting defaults.</p>
<section id="python-tutorials">
<h3>Python Tutorials<a class="headerlink" href="#python-tutorials" title="Permalink to this heading">¶</a></h3>
<p>The 3 workhorse modules for scientific programming
in python are numpy, scipy and matplotlib (although
the third is really a personal preference). Tutorials
for each can be found at</p>
<p><a class="reference external" href="http://wiki.scipy.org/Tentative_NumPy_Tutorial">numpy tutorial</a></p>
<p><a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/tutorial/">scipy tutorial</a></p>
<p><a class="reference external" href="http://matplotlib.org/users/pyplot_tutorial.html">matplotlib tutorial</a></p>
</section>
<section id="setting-your-personal-defaults">
<h3>Setting Your Personal Defaults<a class="headerlink" href="#setting-your-personal-defaults" title="Permalink to this heading">¶</a></h3>
<p>To set personal defaults for runs, edit the _defaults_.py file in
this directory. Some of these (like email) should be obvious, others
you may not understand until becoming more familiar with the package.
Do not worry if these are confusing, and feel free to skip them for now.</p>
</section>
<section id="using-the-best-environment">
<h3>Using the Best Environment<a class="headerlink" href="#using-the-best-environment" title="Permalink to this heading">¶</a></h3>
<p>The ipython (interactive) environment is recommended for commandline
data analysis. To start, it is easiest to auto-import a number of
basic mathematics and visualization modules and use an enhanced
interactivity for displaying figures. To do this enter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ipython
In [1]: import mayavi
In [2]: %pylab
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Mayavi’s API settings will still conflict with matplotlib if
it is not imported in the above order! For this reason, we cannot use
the –pylab call option with ipython.</p>
</div>
<p>Look into online tutorial on numpy and matplotlib. Advanced users
are recommended to edit ~/.matplotlib/matplotlibrc and
~/.ipython/profile_default/startup/autoimports.ipy files.</p>
<p>Now in the ipython environment, type</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pypec</span> <span class="kn">import</span> <span class="n">gpec</span><span class="p">,</span><span class="n">data</span> 
</pre></div>
</div>
<p>There may be a few warnings/hints… take them or leave them.</p>
</section>
</section>
<span class="target" id="module-pypec.data"></span><section id="pypec-data-pythonic-treatment-of-scientific-data">
<h2><a class="reference internal" href="#module-pypec.data" title="pypec.data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.data</span></code></a> – Pythonic Treatment of Scientific Data<a class="headerlink" href="#pypec-data-pythonic-treatment-of-scientific-data" title="Permalink to this heading">¶</a></h2>
<p>The data module is a very generalized tool for visualizing and manipulating scientific data from netcdf and ascii files.</p>
<p>GPEC data is migrating to netcdf, and this module uses the xarray module for its python netcdf interface. The xarray module is very powerful and well documented <a class="reference external" href="http://xarray.readthedocs.org/">here</a>.</p>
<p>Previous GPEC results and some current outputs are still writen to ascii. This module contains a custom I/O for converting ascii data to python objects. A custom Data object was created for this purpose, and conversion to the xarray Dataset is automated in the open_dataset function to facilitate migration to netcdf. The only requirement for creating a data object from an ascii file is that the file have one or more tables of data, with appropriate labels in a header line directly above the data.</p>
<p>Here, we show some examples using common outputs from both GPEC and PENT.</p>
<section id="beginners">
<h3>Beginners<a class="headerlink" href="#beginners" title="Permalink to this heading">¶</a></h3>
<p>First, add your release of GPEC to your PYTHONPATH environment variable.</p>
<p>In an open ipython session, import the data module</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pypec</span> <span class="kn">import</span> <span class="n">data</span>
</pre></div>
</div>
<p>Explore the data module by typing ‘data.’ and hitting tab. For information on any particular object in the module, use the ‘?’ syntax or ‘help’ function. For example, enter ‘data.read?’. You will see that it has a lot of metadata on this function, but the important things to look at for now are the arguments and key word arguments. These are passed to the function as shown in the Definition line… you can either pass a single string, or a string and specification for squeeze. If this confuses you, consult any of the many great python tutorials online.</p>
<p>Lets use it! To get a typical GPEC output into python, use the open_dataset function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">con</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/gpec_control_output_n1.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Printing to the terminal is intelegent, giving a conviniently human readable summary of the data.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">con</span>
<span class="go">&lt;xarray.Dataset&gt;</span>
<span class="go">Dimensions:        (i: 2, m: 129, mode: 34, mode_PX: 34, mode_RX: 34, mode_SC: 4, mode_WX: 34, mode_XT: 34, theta: 513)</span>
<span class="go">Coordinates:</span>
<span class="go">  * i              (i) int32 0 1</span>
<span class="go">  * m              (m) int32 -64 -63 -62 -61 -60 -59 -58 -57 -56 -55 -54 -53 ...</span>
<span class="go">  * mode           (mode) int32 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 ...</span>
<span class="go">  * mode_SC        (mode_SC) int32 1 2 3 4</span>
<span class="go">  * theta          (theta) float64 0.0 0.001953 0.003906 0.005859 0.007812 ...</span>
<span class="go">  * mode_XT        (mode_XT) int32 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ...</span>
<span class="go">  * mode_WX        (mode_WX) int32 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ...</span>
<span class="go">  * mode_RX        (mode_RX) int32 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ...</span>
<span class="go">  * mode_PX        (mode_PX) int32 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ...</span>
<span class="go">Data variables:</span>
<span class="go">    L              (mode, m) complex128 (-0.478146242223-0.0251176845733j) ...</span>
<span class="go">    Lambda         (mode, m) complex128 (1.4032106893e-07-3.56355823737e-08j) ...</span>
<span class="go">    P              (mode, m) complex128 (0.000212307471204-9.52839135614e-05j) ...</span>
<span class="go">    rho            (mode, m) complex128 (9.96920996839e+36+9.96920996839e+36j) ...</span>
<span class="go">    X_EDT          (mode_XT, m) complex128 (3.88116613338e-05+1.90243722796e-05j) ...</span>
<span class="go">    X_EVT          (mode_XT) float64 2.517e+04 1.334e+05 5.081e+05 1.119e+06 ...</span>
<span class="go">    W_EDX          (mode_WX, m) complex128 (2.0673520088e-06-4.52521668335e-07j) ...</span>
<span class="go">    W_EVX          (mode_WX) float64 8.543 2.882 2.516 1.137 0.8107 0.6662 ...</span>
<span class="go">    W_EVX_A        (mode_WX) float64 3.922e+05 7.805e+04 2.466e+05 3.042e+05 ...</span>
<span class="go">    W_EVX_energyv  (mode_WX) float64 6.701e+06 4.499e+05 1.241e+06 6.917e+05 ...</span>
<span class="go">    W_EVX_energys  (mode_WX) float64 6.383e+06 8.481e+05 1.724e+06 6.867e+05 ...</span>
<span class="go">    W_EVX_energyp  (mode_WX) float64 6.817e+06 5.582e+05 8.381e+05 5.807e+05 ...</span>
<span class="go">    R_EDX          (mode_RX, m) complex128 (-9.04352944467e-07-5.23229281269e-07j) ...</span>
<span class="go">    R_EVX          (mode_RX) float64 1.881e+06 8.165e+05 2.477e+05 1.895e+05 ...</span>
<span class="go">    R_EVX_RL       (mode_RX) float64 5.689 0.7149 0.3795 0.8092 0.2417 ...</span>
<span class="go">    R_EVX_energyv  (mode_RX) float64 4.298e+05 1.373e+06 1.01e+06 7.832e+05 ...</span>
<span class="go">    R_EVX_energys  (mode_RX) float64 8.994e+05 1.745e+06 1.096e+06 8.803e+05 ...</span>
<span class="go">    R_EVX_energyp  (mode_RX) float64 3.785e+05 8.975e+05 8.31e+05 6.814e+05 ...</span>
<span class="go">    P_EDX          (mode_PX, m) complex128 (-5.0711563448e-06-2.51239391938e-06j) ...</span>
<span class="go">    P_EVX          (mode_PX) float64 493.5 161.8 146.4 128.7 127.8 110.2 ...</span>
<span class="go">    O_WRX          (mode_RX, mode_WX) float64 0.082 0.99 0.08839 0.01132 ...</span>
<span class="go">    O_WPX          (mode_PX, mode_WX) float64 0.01414 0.9607 0.08296 0.01058 ...</span>
<span class="go">    O_RPX          (mode_PX, mode_RX) float64 0.9571 0.01583 0.02807 0.1558 ...</span>
<span class="go">    O_XT           (mode_XT) complex128 (0.00296215168999+0.00489536349583j) ...</span>
<span class="go">    O_WX           (mode_XT) complex128 (0.0101206436883-0.00397946238035j) ...</span>
<span class="go">    O_RX           (mode_RX) complex128 (-0.00967090555989-0.000112969521773j) ...</span>
<span class="go">    O_PX           (mode_PX) complex128 (-0.00598278876631+0.0105074013581j) ...</span>
<span class="go">    Phi_EX         (m) complex128 (-1.42853908779e-10-4.20811059626e-11j) ...</span>
<span class="go">    Phi_ET         (m) complex128 (-6.89310992668e-10-1.01978717443e-09j) ...</span>
<span class="go">    W_EDX_FUN      (mode_WX, theta) complex128 (-1.45421344314-0.0472501327701j) ...</span>
<span class="go">    R_EDX_FUN      (mode_RX, theta) complex128 (1.45665015126-0.521253285202j) ...</span>
<span class="go">    b_nm           (m) complex128 (-9.46126704696e-10+1.48737377032e-09j) ...</span>
<span class="go">    b_xnm          (m) complex128 (-5.48365827795e-10+5.89720875704e-10j) ...</span>
<span class="go">    xi_nm          (m) complex128 (-3.3871234611e-09-1.86371281018e-09j) ...</span>
<span class="go">    xi_xnm         (m) complex128 (-6.60388933097e-10+2.7635104984e-09j) ...</span>
<span class="go">    xi_n           (theta) complex128 (0.000402066428626+0.00260098774146j) ...</span>
<span class="go">    xi_xn          (theta) complex128 (-0.000601114809848-0.00197978522356j) ...</span>
<span class="go">    b_n            (theta) complex128 (-0.00157772177652+0.00052698051739j) ...</span>
<span class="go">    b_xn           (theta) complex128 (-0.000920387597747+0.000315158824532j) ...</span>
<span class="go">    R              (theta) float64 2.289 2.289 2.288 2.287 2.286 2.284 2.282 ...</span>
<span class="go">    z              (theta) float64 0.02442 0.03972 0.05506 0.07046 0.08596 ...</span>
<span class="go">    R_n            (theta) float64 1.0 0.9995 0.9981 0.9959 0.9928 0.9889 ...</span>
<span class="go">    z_n            (theta) float64 0.003568 0.03241 0.06134 0.09036 0.1195 ...</span>
<span class="go">    dphi           (theta) float64 0.0 -0.039 -0.078 -0.117 -0.1559 -0.1948 ...</span>
<span class="go">Attributes:</span>
<span class="go">    title: GPEC outputs in Fourier or alternate modal bases</span>
<span class="go">    Jacobian: pest</span>
<span class="go">    q_lim: 5.2</span>
<span class="go">    psi_n_lim: 0.991536136179</span>
<span class="go">    shot: 147131</span>
<span class="go">    time: 2300</span>
<span class="go">    machine: DIII-D</span>
<span class="go">    n: 1</span>
<span class="go">    version: GPEC version 0.3.1</span>
<span class="go">    long_name: Surface Inductance</span>
<span class="go">    energy_vacuum: 3.28697635252</span>
<span class="go">    energy_surface: 7.8714975121</span>
<span class="go">    energy_plasma: 3.7597335618</span>
</pre></div>
</div>
<p>We see the data contains dimensions, variables, and global attributes. Some individual data arrays may have attributes as well.</p>
<p>For quick visualization, we can use xarray’s built in plotting routines,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">xarray.plot</span> <span class="k">as</span> <span class="nn">xplot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="p">,</span><span class="n">a1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l1</span> <span class="o">=</span> <span class="n">xplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;W_EVX&#39;</span><span class="p">])</span> <span class="c1"># 1D data, returns a list of lines</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_eigenvalues.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_eigenvalues.png"><img alt="examples/figures/example_eigenvalues.png" src="examples/figures/example_eigenvalues.png" style="width: 600px;" /></a>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span><span class="p">,</span><span class="n">a2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l2</span> <span class="o">=</span> <span class="n">xplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;W_EDX&#39;</span><span class="p">])</span> <span class="c1"># This is 2D, returns Quadmesh</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_eigenvectors.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_eigenvectors.png"><img alt="examples/figures/example_eigenvectors.png" src="examples/figures/example_eigenvectors.png" style="width: 600px;" /></a>
<p>Note this uses matplotlib, and the plots are fully interactive. Navigate and zoom using the toolbar below plots.</p>
<p>This is not the recommended way to display detailed studies using GPEC data, however. It is
recommended that the user familiarise themselves with matplotlib (there are many great online
tutorials) and write their own scripts for plotting the data of interest, as details will
inevitably need tweaking.</p>
<p>For a common example of more customized plots, lets look at some 2d data</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cyl</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/gpec_cylindrical_output_n1.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We could use the built in plotting methods like ds[‘b_z’].plot), but these are (R,z) figures
should be done with a little care to look right. Lets look at b_z for example,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">cyl</span><span class="p">[</span><span class="s1">&#39;b_z&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">v</span><span class="p">),</span><span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;RdBu&#39;</span><span class="p">,</span><span class="n">vmin</span><span class="o">=-</span><span class="mf">2e-3</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="mf">2e-3</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()],</span>
<span class="gp">... </span>         <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;gaussian&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;$\delta B_z$&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xtks</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mf">1.7</span><span class="p">,</span><span class="mf">2.4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xtxt</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;R (m)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ytxt</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;z (m)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_pbrzphi.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_pbrzphi.png"><img alt="examples/figures/example_pbrzphi.png" src="examples/figures/example_pbrzphi.png" style="width: 600px;" /></a>
<p>There we go. That looks publication ready!</p>
<p>Another common plot of GPEC outputs is the (psi,m) spectrogram plot. Lets quickly make a
nice one,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prof</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/gpec_profile_output_n1.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;psi_n&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;psi_n&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;xi_m_contrapsi&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span><span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span><span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$\xi^\psi_m$&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lim</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xtxt</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ytxt</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$\psi$&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_xispectrogram.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_xispectrogram.png"><img alt="examples/figures/example_xispectrogram.png" src="examples/figures/example_xispectrogram.png" style="width: 600px;" /></a>
<p>Note that the choice of interpolation resulted in discrete bands in m, which is true
to the the discrete fourier decomposition used in the codes and provides a more intuitive
connection between what the user sees and what the code is calculating.</p>
<p>One of the many cool additions to matplotlib in the pypec package is the ability to
write line plots to tables. Lets look at a 1D mode spectrum plot for example,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;psi_n&#39;</span><span class="p">],</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;xi_m_contrapsi&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">)),</span><span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;m=</span><span class="si">{:}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mappable</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">set_linearray</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">lines</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ytxt</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$\xi^\psi_m$&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xtxt</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;$\psi$&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_xim.png&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">printlines</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_xim.txt&#39;</span><span class="p">,</span><span class="n">squeeze</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">Wrote lines to examples/figures/example_xim.txt</span>
<span class="go">True</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_xim.png"><img alt="examples/figures/example_xim.png" src="examples/figures/example_xim.png" style="width: 600px;" /></a>
<p>That’s it! Read the table with your favorite editor. It will probably need a little
cleaning at the top since it tries to use the lengthy legend labels as column headers.</p>
<p>At this point we have outlined the basics. Using this module and similar commands
to those used here the user should be able to fully interact with and visually
explore the GPEC output.</p>
</section>
<section id="advanced-users">
<h3>Advanced Users<a class="headerlink" href="#advanced-users" title="Permalink to this heading">¶</a></h3>
<p>In this section, we will assume you have a pretty good hold on both python and the basic ploting functions of these modules.</p>
<p>Now that you use this module regularly, save yourself some time by placing the line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pypec</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>into your autoimport file located at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/.</span><span class="n">ipython</span><span class="o">/</span><span class="n">profile_default</span><span class="o">/</span><span class="n">startup</span><span class="o">/</span><span class="n">autoimports</span><span class="o">.</span><span class="n">ipy</span>
</pre></div>
</div>
</section>
<section id="deprecated-ascii-interface">
<h3>Deprecated ASCII Interface<a class="headerlink" href="#deprecated-ascii-interface" title="Permalink to this heading">¶</a></h3>
<p>As mentioned above, GPEC has moved the vast majority of its I/O to netcdf, and open_dataset should
be used to create xarray Dataset objects whenever possible. This section describes the deprecated
ascii interface for context, and motivates the move to netcdf.</p>
<p>Data in ascii tables can be read into a custom Data object using the read function,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mydata</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/g147131.02300_DIIID_KEFIT.kin&#39;</span><span class="p">)</span>
<span class="go">Casting table 1 into Data object.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">mydata</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">mydata</span><span class="p">)</span>
<span class="go">(&lt;type &#39;list&#39;&gt;, 1)</span>
</pre></div>
</div>
<p>The read function creates a list of data objects corresponding to the tables in the text file. In this case, there is only one table. If we knew this ahead of time, we could have gotten the data object directly by splitting the list.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mydata</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/g147131.02300_DIIID_KEFIT.kin&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">Casting table 1 into Data object.</span>
</pre></div>
</div>
<p>At its heart, the data object consists of independent data and dependent data. This are stored differently, namely as a list in the pts attribute and as a dictionary in y. The x attribute is a dictionary if the data is 1 dimensional or a regular grid is found in the first n columns of the data (n=2,3), and left empty if the n&gt;1 dependent data is irregular.</p>
<p>Explore the data using the corresponding python tools.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mydata</span><span class="o">.</span><span class="n">xnames</span>
<span class="go">[&#39;psi&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mydata</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;nim^3&#39;, &#39;tieV&#39;, &#39;teeV&#39;, &#39;wexbrad/s&#39;, &#39;nem^3&#39;]</span>
</pre></div>
</div>
<p>You would access the ion density data using mydata.y[‘nim3’] for example.</p>
<p>The data object, however, is more that just a place holder for parced text files. It contains visualization and data manipulation tools. Plotting functions return interactive matplotlib Figure objects.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">plot1d</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_profiles.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_profiles.png"><img alt="examples/figures/example_profiles.png" src="examples/figures/example_profiles.png" style="width: 600px;" /></a>
<p>Interpolation returns a new Data object of the desired data, which can be one, multiple, or all of the dependent variables found in y.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myinterp</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),[</span><span class="s1">&#39;nim^3&#39;</span><span class="p">,</span><span class="s1">&#39;tieV&#39;</span><span class="p">])</span>
<span class="go">Forming interpolator for nim^3.</span>
<span class="go">Interpolating values for nim^3.</span>
<span class="go">Forming interpolator for tieV.</span>
<span class="go">Interpolating values for tieV.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">mydata</span><span class="o">.</span><span class="n">plot1d</span><span class="p">(</span><span class="s1">&#39;nim^3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">myinterp</span><span class="o">.</span><span class="n">plot1d</span><span class="p">(</span><span class="s1">&#39;nim^3&#39;</span><span class="p">,</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span><span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">figure</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_profiles2.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_profiles2.png"><img alt="examples/figures/example_profiles2.png" src="examples/figures/example_profiles2.png" style="width: 400px;" /></a>
<p>Note that the interpolator initialized the interpolation function on the first call, this is saved internally for subsequent calls.</p>
<p>One common need is to look at spectra. For this we want to utilize
the full functionality of the data instances’ plot1d function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xc</span><span class="p">,</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/gpec_xclebsch_n1.out&#39;</span><span class="p">)</span>
<span class="go">Casting table 1 into Data object.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">xc</span><span class="o">.</span><span class="n">plot1d</span><span class="p">(</span><span class="s1">&#39;xi^psi&#39;</span><span class="p">,</span><span class="s1">&#39;psi&#39;</span><span class="p">,</span><span class="n">x2rng</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_spectrum.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_spectrum.png"><img alt="examples/figures/example_spectrum.png" src="examples/figures/example_spectrum.png" style="width: 600px;" /></a>
<p>We knew it was one table, so we used the “,” to automatically
unpack returned list. We were then so familiar with the args and
kwargs of the plotting function that we did not bother typing the names.
If you do this, be sure you get the order consistent with the order
given in the documentation “Definition” line (watch out for inconsistent
“Docstring” listings).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These examples can be tested by developers using ipython
in this directory as follows:</p>
<blockquote>
<div><p>In [1]: import data,doctest</p>
<p>In [2]: doctest.testmod(data,verbose=True)</p>
</div></blockquote>
</div>
</section>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="pypec.data.DataBase">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypec.data.</span></span><span class="sig-name descname"><span class="pre">DataBase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fromtxt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preamble</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forcex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forcedim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_complex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#DataBase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.DataBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>An emtpy class object with the following operations overloaded:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="p">,</span><span class="o">-</span><span class="p">,</span><span class="o">*</span><span class="p">,</span><span class="o">/</span><span class="p">,</span><span class="o">**</span>
</pre></div>
</div>
<p>such that the operation is only performed on the attributes
starting with .real_ and .imag_ and ending with r,z, or phi.
If the two factors in the operation have different r or z attributes
data is interpolated to the wider spaced axis.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pypec.data.DataBase.interp">
<span class="sig-name descname"><span class="pre">interp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ynames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#DataBase.interp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.DataBase.interp" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate data to point(s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – ndarray shape (npts,ndim). Point(s) on dependent axis(axes).</p></li>
<li><p><strong>ynames</strong> – list. Any number of keys from y attribute</p></li>
<li><p><strong>quiet</strong> – bool. Suppress status messages</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict. Each name contains array of interpolated data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypec.data.DataBase.plot1d">
<span class="sig-name descname"><span class="pre">plot1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ynames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x1rng</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x2rng</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x3rng</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squeeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#DataBase.plot1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.DataBase.plot1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Line plots of from 1D or 2D data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ynames</strong> – list. Strings specifying dependent data displayed.</p></li>
<li><p><strong>xname</strong> – string. The independent axis if 2D data.</p></li>
<li><p><strong>x1rng</strong> – optional. Valid formats are,
x - Plot single nearest point.
(xmin,xmax) - Plots all data in range (min,max).
(xmin,xmax,n) - Plots n evenly spaced points in range.</p></li>
<li><p><strong>x2rng</strong> – Same as x1rng. Applicable to 2D or 3D data.</p></li>
<li><p><strong>x3rng</strong> – Same as x2rng for 3D data only. Order of x is xnames with xname placed in front if given.</p></li>
<li><p><strong>squeeze</strong> – bool. Plots all ynames in same axis.</p></li>
<li><p><strong>kwargs</strong> – dict. Valid matplotlib pyplot.plot keyword arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>figure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypec.data.DataBase.plot2d">
<span class="sig-name descname"><span class="pre">plot2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ynames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aspect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'imshow'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(256,</span> <span class="pre">256)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#DataBase.plot2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.DataBase.plot2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Matplotlib 2D plots of the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ynames</strong> – list. Strings specifying dependent data displayed.</p></li>
<li><p><strong>aspect</strong> – str/float. Choose from ‘auto’ or ‘equal’ (see matplotlib axes.set_aspect). A float stretches a circle to hight=aspect*width.</p></li>
<li><p><strong>plot_type</strong> – str. Choose one of,
“imshow”       - Use matplotlib imshow to plot on grid.
“pcolormesh”   - Use matplotlib pcolormesh to plot on grid.
“contour”      - Use matplotlib contour to plot on grid.
“contourf”     - Use matplotlib contourf to plot on grid.
“tripcolor”    - Use matplotlib tripcolor to plot raw points.
“tripcontour”  - Use matplotlib tripcontour to plot raw points.
“tripcontourf” - Use matplotlib tripcontourf to plot raw points.</p></li>
<li><p><strong>cbar</strong> – bool. Show colorbar.</p></li>
<li><p><strong>grid_size</strong> – tuple. Size of grid used if no regular axes x (in order of xnames).</p></li>
<li><p><strong>swap</strong> – bool. Swap x/y axes.</p></li>
<li><p><strong>kwargs</strong> – dict. Valid pcolormesh/contour/contourf key arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>figure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypec.data.DataBase.plot3d">
<span class="sig-name descname"><span class="pre">plot3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ynames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'psi':</span> <span class="pre">1}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(600,</span> <span class="pre">600)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#DataBase.plot3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.DataBase.plot3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Three dimensional plots. Data with xnames r,z will be plotted
with third dimension phi where Y = Re[y]cos(n*phi)+Im[y]sin(n*phi).</p>
<blockquote>
<div><ul class="simple">
<li><p>1D data &gt; lines in a plane in 3-space.</p></li>
<li><p>2D data &gt; z axis becomes y value</p></li>
<li><p>3D data &gt; chosen display type</p></li>
</ul>
</div></blockquote>
<p>Must have mayavi.mlab module available in pythonpath.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ynames</strong> – list. Strings specifying dependent data displayed.</p></li>
<li><p><strong>filter</strong> – dict. Filter points as only those closest to this y value.</p></li>
<li><p><strong>cbar</strong> – bool. Display a vertical colorbar in the Mayavi Scene.</p></li>
<li><p><strong>size</strong> – tuple. Size of figure in pixels.</p></li>
<li><p><strong>plot_type</strong> – str. Valid mayavi.mlab function name. Overrides default function choices (plot3d,mesh,quiver3d).</p></li>
<li><p><strong>phi</strong> – ndarray. Toroidal angle grid for complex 2D data. Default is 360 degrees, 180 pts.</p></li>
<li><p><strong>center</strong> – float. Center colormap on this value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>figure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypec.data.DataBase.scatter">
<span class="sig-name descname"><span class="pre">scatter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ynames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x3</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#DataBase.scatter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.DataBase.scatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Scatter plot display for non-regular data. Display mimics plot1d in t
hat it displays a single independent axis. If is another independent
axis exists, and is not sliced using one of the optional keyword arguments,
it s represented as the color of the plotted symbols. If the data is 3D
and unsliced, preference if given in order of xnames.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ynames</strong> – list. Dependent data to be displayed. Default is all y data.</p></li>
<li><p><strong>xname</strong> – str. Independent axis used in scatter plots. Default is first in xnames.</p></li>
<li><p><strong>x1</strong> – float. Use only data with first axis clossest to value.</p></li>
<li><p><strong>x2</strong> – float. Use only data with second axis clossest to value.</p></li>
<li><p><strong>x3</strong> – float. Use only data with thrid axis clossest to value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>figure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pypec.data.DataBase.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ynames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#DataBase.slice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.DataBase.slice" title="Permalink to this definition">¶</a></dt>
<dd><p><em>UNDER CONSTRUCTION</em></p>
<p>Return 1D data object from 2D. Method grids new data,
so beware of loosing accuracy near rational surfaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – float. Lower bound of the axis.</p></li>
<li><p><strong>xname</strong> – str. Axis allong which slice is performed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>obj. New data nd-1 dimensional data object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.data.getshot">
<span class="sig-prename descclassname"><span class="pre">pypec.data.</span></span><span class="sig-name descname"><span class="pre">getshot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#getshot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.getshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Find 6 digit shot number in path to directory or file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>d</strong> – str. Path.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str. Shot number if found, ‘’ if not.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.data.open_dataset">
<span class="sig-prename descclassname"><span class="pre">pypec.data.</span></span><span class="sig-name descname"><span class="pre">open_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename_or_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">complex_dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'i'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#open_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.open_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for xarray.open_dataset that allows automated reduction of
a dimension distinguishing real and imaginary components.</p>
<p>Strings are interpreted as a path to a netCDF file or an OpenDAP URL
and opened with python-netCDF4, unless the filename ends with .gz, in
which case the file is gunzipped and opened with scipy.io.netcdf
(only netCDF3 supported). File-like objects are opened with
scipy.io.netcdf (only netCDF3 supported).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename_or_obj</strong> – str, file or xarray.backends.DataStore</p></li>
<li><p><strong>complex_dim</strong> – str. Dimension designating real/imaginary (0,1)</p></li>
<li><p><strong>kwargs</strong> – dict. All other key word arguments are passed to xarray.open_dataset.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.data.plotall">
<span class="sig-prename descclassname"><span class="pre">pypec.data.</span></span><span class="sig-name descname"><span class="pre">plotall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xfun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yfun</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#plotall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.plotall" title="Permalink to this definition">¶</a></dt>
<dd><p>Line plot of data gethered recursively from a dictionary
containing multiple namelists or data objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>results</strong> – dict. A readall result.</p></li>
<li><p><strong>xfun</strong> – func. A function that takes args (key,val) for each dictionary item and whose result is appended to the xaxis.</p></li>
<li><p><strong>yfun</strong> – func. A function that takes args (key,val) for each dictionary item and whose result is appended to the yaxis.</p></li>
<li><p><strong>axes</strong> – obj. matplotlib axes object.</p></li>
<li><p><strong>kwargs</strong> – dict. Passed to matplotlib plot function</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>figure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.data.read">
<span class="sig-prename descclassname"><span class="pre">pypec.data.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squeeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forcex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forcedim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxnumber</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">999</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxlength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_complex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the data from any gpec output as a list of python
class-type objects using numpy.genfromtxt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> – str. Path of gpec output file.</p></li>
<li><p><strong>squeeze</strong> – bool. Sets all attributes to single data object.</p></li>
<li><p><strong>forcex</strong> – list. Set independent data labels.</p></li>
<li><p><strong>forcedim</strong> – list. Set dimensionality of each x.</p></li>
<li><p><strong>maxnumber</strong> – int. Reads only first maxnumber of tables.</p></li>
<li><p><strong>maxlength</strong> – int. Tables with more rows than this are downsampled for speed.</p></li>
<li><p><strong>auto_complex</strong> – bool. Include amplitude and phase of complex data as variables.</p></li>
<li><p><strong>quiet</strong> – bool. Prevent non-warning messages printed to terminal.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list. Class objects for each block of data in the file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.data.readall">
<span class="sig-prename descclassname"><span class="pre">pypec.data.</span></span><span class="sig-name descname"><span class="pre">readall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filetype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pent_n1.out'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#readall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.readall" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively searches base directory for files with name
filetype, reads them into python objects, and stores
objects in a dictionary with directory names as keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base</strong> – str. Top level directory in which to begin search.</p></li>
<li><p><strong>filetype</strong> – str. Files to read.</p></li>
<li><p><strong>kwargs</strong> – dict. Passed to appropriate reader function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict. Key-Value pairs are directories and their contained data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.data.write">
<span class="sig-prename descclassname"><span class="pre">pypec.data.</span></span><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataobj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ynames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/data.html#write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.data.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data object to file. The aim is to replicate the original file
structure… the header text will have been lost in the read however,
as will some column label symbols in the use of genfromtxt.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataobj</strong> – obj. Data_Base type object.</p></li>
<li><p><strong>fname</strong> – str. File to write to.</p></li>
<li><p><strong>kwargs</strong> – dict. Passed to numpy.savetxt</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool. True.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-pypec.post"></span><section id="pypec-post-post-processing-fundamental-gpec-outputs">
<h2><a class="reference internal" href="#module-pypec.post" title="pypec.post"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.post</span></code></a> – Post-Processing Fundamental GPEC Outputs<a class="headerlink" href="#pypec-post-post-processing-fundamental-gpec-outputs" title="Permalink to this heading">¶</a></h2>
<p>The post module is a repository of basic post-processing functions for expanding,
manipulating, and visualizing fundamental gpec output. This is not an exhaustive
list of post-processing procedures. The focus is on a) transforming between
coordinate systems and b) matrix optimizations.</p>
<p>Here, we show some examples using common outputs.</p>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h3>
<p>First, add your release of GPEC to your PYTHONPATH environment variable.</p>
<p>In an open ipython session, import the data module</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pypec</span> <span class="kn">import</span> <span class="n">data</span><span class="p">,</span> <span class="n">post</span>
</pre></div>
</div>
<p>To get a typical GPEC output into python, use the open_dataset function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">con</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/gpec_control_output_n1.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prof</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/gpec_profile_output_n1.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>First, 3D equilibrium calculations lend themselves naturally to 3D figures. This module
has a helpful function for forming the necessary x,y,z meshes from the 2D boundary.
After adding the requisite geometry to the control surface output,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">con</span> <span class="o">=</span> <span class="n">add_3dsurface</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">phi_lim</span><span class="o">=</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">)</span>
</pre></div>
</div>
<p>it is easy to make 3D surface plots using mayavi,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="o">=</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;x_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;y_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;z_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b_n_3d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;b_n_fun&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;phase_surf&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">mmlab</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">fgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="mi">600</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mesh</span> <span class="o">=</span> <span class="n">mmlab</span><span class="o">.</span><span class="n">mesh</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">scalars</span><span class="o">=</span><span class="n">b_n_3d</span><span class="p">,</span><span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;RdBu&#39;</span><span class="p">,</span><span class="n">vmin</span><span class="o">=-</span><span class="mf">2e-3</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="mf">2e-3</span><span class="p">,</span><span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that mayavi explicitly requires numpy.ndarray objects so we had to
use the values of each xarray DataArray.</p>
<p>Now, lets cap the ends with our full profile information. This is a little
more involved. For the toroidal angle of each end, we need to rotate the
2D arrays for the mesh and the field values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">phi</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;b_n_fun&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="mi">1</span><span class="o">*</span><span class="n">phi</span><span class="p">))</span> <span class="c1"># poloidal cross section at phi</span>
<span class="gp">... </span>    <span class="n">xy</span> <span class="o">=</span> <span class="n">prof</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">phi</span><span class="p">)</span> <span class="c1"># rotate the plane</span>
<span class="gp">... </span>    <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">xy</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">imag</span><span class="p">(</span><span class="n">xy</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="gp">... </span>    <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">b</span><span class="p">])[:,:,::</span><span class="mi">10</span><span class="p">]</span> <span class="c1"># downsample psi by 10 to speed up mayavi</span>
<span class="gp">... </span>    <span class="n">cap</span> <span class="o">=</span> <span class="n">mmlab</span><span class="o">.</span><span class="n">mesh</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">scalars</span><span class="o">=</span><span class="n">b</span><span class="p">,</span><span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;RdBu&#39;</span><span class="p">,</span><span class="n">vmin</span><span class="o">=-</span><span class="mf">2e-3</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="mf">2e-3</span><span class="p">,</span><span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmlab</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;examples/figures/example_bn_3d_capped.png&#39;</span><span class="p">,</span><span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_bn_3d_capped.png"><img alt="examples/figures/example_bn_3d_capped.png" src="examples/figures/example_bn_3d_capped.png" style="width: 600px;" /></a>
<p>That looks awesome!</p>
<p>There are, of course, plenty more outputs and important ways of visualizing
them intuitively. See, for example, the 2D plots in the add_3dsurface
function’s documentation. At this point we have outlined the basics. Using
this module and similar commands to those used here, the user should be able
to do all sorts of post-processing tasks.</p>
</section>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pypec.post.add_3dsurface">
<span class="sig-prename descclassname"><span class="pre">pypec.post.</span></span><span class="sig-name descname"><span class="pre">add_3dsurface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6.283185307179586</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">180</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/post.html#add_3dsurface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.post.add_3dsurface" title="Permalink to this definition">¶</a></dt>
<dd><p>Add 3D geometric dimensions to dataset from gpec_control_output_n#.nc.</p>
<p>Note, this surface uses the machine toroidal angle. It should only by used
with functions that do the same (tmag_out=0).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>control_output</strong> – Dataset. xarray Dataset opened from gpec_control_output_n#.nc</p></li>
<li><p><strong>phi_lim</strong> – float. Toroidal angle extended from 0 to phi_lim radians.</p></li>
<li><p><strong>nphi</strong> – int. Length of toroidal angle dimension array.</p></li>
<li><p><strong>overwrite</strong> – bool. Overwrite geometric quantities if they already exist.</p></li>
<li><p><strong>inplace</strong> – bool. Modify dataset inplace. Otherwise, return a new dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataset. New dataset with additional dimensions.</p>
</dd>
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>After opening, adding geometry and confirming the functional forms
are using the machine angle,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">con</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_ideal_example/gpec_control_output_n1.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">con</span> <span class="o">=</span> <span class="n">add_3dsurface</span><span class="p">(</span><span class="n">con</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">con</span> <span class="o">=</span> <span class="n">add_fun</span><span class="p">(</span><span class="n">con</span><span class="p">,</span><span class="n">tmag</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>it is easy to make 3D surface plots using mayavi,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">mmlab</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">fgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mesh</span> <span class="o">=</span> <span class="n">mmlab</span><span class="o">.</span><span class="n">mesh</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;x_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;y_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;z_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">scalars</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;b_n_fun&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;phase_surf&#39;</span><span class="p">]),</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;RdBu&#39;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmlab</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;examples/figures/example_bn_3d.png&#39;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_bn_3d.png"><img alt="examples/figures/example_bn_3d.png" src="examples/figures/example_bn_3d.png" style="width: 600px;" /></a>
<p>Make 2D perturbed last-closed-flux-surface plots quickly using,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fac</span> <span class="o">=</span> <span class="mf">1e-1</span> <span class="c1"># good for DIII-D unit eigenmodes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">],</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span> <span class="c1"># most and least stable modes</span>
<span class="gp">... </span>    <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;R_xe_eigenvector_fun&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">fac</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;R&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span> <span class="o">*</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;R_n&#39;</span><span class="p">],</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span> <span class="o">*</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;z_n&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">set_linearray</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:],</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">sm</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Mode Index&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xtl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;R (m)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;z (m)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_boundary_wiggle.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_boundary_wiggle.png"><img alt="examples/figures/example_boundary_wiggle.png" src="examples/figures/example_boundary_wiggle.png" style="width: 600px;" /></a>
<p>Combining these two concepts, we can even plot a 3D perturbed surface distorted
by the normal displacements and colored to show the normal field.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span> <span class="o">=</span> <span class="n">mmlab</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">fgcolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xinorm</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;phase_surf&#39;</span><span class="p">]</span> <span class="c1"># good for ~cm displacements</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;x_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">+</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">xinorm</span> <span class="o">*</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;x_surf_n&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;y_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">+</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">xinorm</span> <span class="o">*</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;y_surf_n&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;z_surf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">+</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">xinorm</span> <span class="o">*</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;z_surf_n&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;b_n_fun&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;phase_surf&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mesh</span> <span class="o">=</span> <span class="n">mmlab</span><span class="o">.</span><span class="n">mesh</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">scalars</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="s1">&#39;RdBu&#39;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mmlab</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;examples/figures/example_bn_xin_3d.png&#39;</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_bn_xin_3d.png"><img alt="examples/figures/example_bn_xin_3d.png" src="examples/figures/example_bn_xin_3d.png" style="width: 600px;" /></a>
<p>Fancy!</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.post.add_fun">
<span class="sig-prename descclassname"><span class="pre">pypec.post.</span></span><span class="sig-name descname"><span class="pre">add_fun</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">control_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tmag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/post.html#add_fun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.post.add_fun" title="Permalink to this definition">¶</a></dt>
<dd><p>Add real space functions of theta calculated from the spectral outputs.
This is helpful when analyzing a GPEC run for which fun_flag was off
for speed/efficiency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>control_output</strong> – Dataset. xarray Dataset opened from gpec_control_output_n#.nc</p></li>
<li><p><strong>keys</strong> – iterable. List of keys for which &lt;key&gt;_fun will be added. Default is all spectral variables.</p></li>
<li><p><strong>tmag</strong> – bool. Keep the magnetic coordinate angle (default is machine angle).</p></li>
<li><p><strong>inplace</strong> – bool. Add to dataset. Otherwise, make a new dataset object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dataset. New dataset with real space functions of theta.</p>
</dd>
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>You can check this against fun_flag outputs,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">con</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_kinetic_example/gpec_control_output_n1.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">con_mag</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">add_fun</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">tmag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">con_mac</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="n">add_fun</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="n">tmag</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;theta&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;fun_flag Output&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;theta&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">con_mag</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Magnetic Angle&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;theta&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">con_mac</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]),</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Machine Angle&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Normal Displacement&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Amplitude&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;theta&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;fun_flag Output&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;theta&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">con_mag</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Magnetic Angle&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;theta&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">con_mac</span><span class="p">[</span><span class="s1">&#39;xi_n_fun&#39;</span><span class="p">]),</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Machine Angle&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Phase&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_add_fun.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_add_fun.png"><img alt="examples/figures/example_add_fun.png" src="examples/figures/example_add_fun.png" style="width: 600px;" /></a>
<p>To see the function is properly recovered. Note that the fun_flag outputs are
on the machine coordinate.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.post.optimize_torque">
<span class="sig-prename descclassname"><span class="pre">pypec.post.</span></span><span class="sig-name descname"><span class="pre">optimize_torque</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrixprofile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psilow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psihigh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/post.html#optimize_torque"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.post.optimize_torque" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the eigenvalue and eigenvector corresponding to maximum the torque
within the specified range of normalized poloidal flux.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matrixprofile</strong> – DataArray. T_x or T_coil from gpec_profile_output_n#.nc.</p></li>
<li><p><strong>psilow</strong> – float. Lower limit of normalized poloidal flux.</p></li>
<li><p><strong>psihigh</strong> – float. Upper limit of normalized poloidal flux.</p></li>
<li><p><strong>normalize</strong> – bool. Optimize value within psi range normalized to the total.</p></li>
<li><p><strong>energy</strong> – bool. Optimize 2ndW (default is torque).</p></li>
<li><p><strong>minimize</strong> – bool. FInd the minimum (default is maximum).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>w,v. Eigenvalue, eigenvector of optimum.</p>
</dd>
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>The matrix order will be forced to end in the primed dimension, i.e. (‘psi_n’, ‘m’, ‘m_prime’)
or (‘psi_n’, ‘coil_index’, ‘coil_index_prime’).</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>With the output of a kinetic GPEC run in hand,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">con</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_kinetic_example/gpec_control_output_n1.nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prof</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;examples/DIIID_kinetic_example/gpec_profile_output_n1.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This function provides the spectrum that optimizes the integral torque
and the corresponding profile is easily obtained.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="p">,</span><span class="n">v</span> <span class="o">=</span> <span class="n">optimize_torque</span><span class="p">(</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;T_xe&#39;</span><span class="p">])</span> <span class="c1"># handles any order of dims</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T_mat</span> <span class="o">=</span> <span class="n">prof</span><span class="p">[</span><span class="s1">&#39;T_xe&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="s1">&#39;psi_n&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;m_prime&#39;</span><span class="p">)</span> <span class="c1"># order matters in  dot products</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T_opt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">conj</span><span class="p">(),</span> <span class="n">T_mat</span><span class="p">),</span> <span class="n">v</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span> <span class="c1"># 0.5 for quadratic fourier analysis</span>
</pre></div>
</div>
<p>We can then compare the spectrum and torque from our GPEC perturbed equilibrium to
the theoretical optima,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_power</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;Phi_xe&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">conj</span><span class="p">(),</span> <span class="n">con</span><span class="p">[</span><span class="s1">&#39;Phi_xe&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;Phi_xe&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Input&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">con</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">input_power</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Optimum Torque&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="n">prof</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Input&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">prof</span><span class="p">[</span><span class="s1">&#39;psi_n&#39;</span><span class="p">],</span> <span class="n">T_opt</span><span class="o">*</span><span class="n">input_power</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Optimized Torque&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leg</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_optimize_torque.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_optimize_torque.png"><img alt="examples/figures/example_optimize_torque.png" src="examples/figures/example_optimize_torque.png" style="width: 600px;" /></a>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.post.update_name_conventions">
<span class="sig-prename descclassname"><span class="pre">pypec.post.</span></span><span class="sig-name descname"><span class="pre">update_name_conventions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/post.html#update_name_conventions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.post.update_name_conventions" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the naming conventions in a dataset to the latest conventions.</p>
<p>Use this to avoid lots of if statements in cross-checking versions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – </p></li>
<li><p><strong>version</strong> – str. Override version attribute.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-pypec.gpec"></span><section id="pypec-gpec-python-wrappers-for-fortran-codes">
<h2><a class="reference internal" href="#module-pypec.gpec" title="pypec.gpec"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.gpec</span></code></a> – Python Wrappers for FORTRAN Codes<a class="headerlink" href="#pypec-gpec-python-wrappers-for-fortran-codes" title="Permalink to this heading">¶</a></h2>
<p>This is a collection of wrapper functions for running DCON, GPEC, and PENT.</p>
<p>If run from the command line, this module will call an associated GUI.</p>
<p>This module is for more advanced operators who want to control/run 
the fortran package for DCON, GPEC, and PENT. To get started, lets
explore the package</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gpec</span><span class="o">.</span>
<span class="go">gpec.InputSet       gpec.join           gpec.optimize       gpec.run</span>
<span class="go">gpec.bashjob        gpec.namelist       gpec.optntv         gpec.subprocess</span>
<span class="go">gpec.data           gpec.np             gpec.os             gpec.sys</span>
<span class="go">gpec.default        gpec.ntv_dominantm  gpec.packagedir     gpec.time</span>
</pre></div>
</div>
<p>many of these are simply standard python modules imported by gpec
lets submit a full run in just 4 lines:
steal the settings from a previous run (leaving run director as deafult)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_inputs</span> <span class="o">=</span> <span class="n">gpec</span><span class="o">.</span><span class="n">InputSet</span><span class="p">(</span><span class="n">indir</span><span class="o">=</span><span class="s1">&#39;/p/gpec/users/nlogan/data/d3d/ipecout/145117/ico3_n3/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>change what we want to</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_inputs</span><span class="p">[</span><span class="s1">&#39;dcon&#39;</span><span class="p">][</span><span class="s1">&#39;DCON_CONTROL&#39;</span><span class="p">][</span><span class="s1">&#39;nn&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_dir</span> <span class="o">=</span> <span class="n">new_inputs</span><span class="o">.</span><span class="n">indir</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;2&#39;</span>
</pre></div>
</div>
<p><em>Double check that all inputs are what you expect</em> (not shown here)
and submit the job to the cluster.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gpec</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">new_dir</span><span class="p">,</span><span class="o">**</span><span class="n">new_inputs</span><span class="o">.</span><span class="n">infiles</span><span class="p">)</span>
</pre></div>
</div>
<p>Running the package using this module will</p>
<ol class="arabic simple">
<li><p>Create the new location (if not already existing), and cd to it</p></li>
<li><p>rm all .out, .dat, and .bin files already in the directory (not dcon ones if rundcon=False, not pent ones for runpent=False, etc).</p></li>
<li><p>cp all .dat and .in files from the run directoy to the new location</p></li>
<li><p>Write all namelists supplied in kwargs to file (overwriting)</p></li>
<li><p>Write a unique bash script for the run, and submit it OR run each fortran routine from the commandline.</p></li>
<li><p>Remove all .dat and xdraw files from the directory</p></li>
</ol>
<p>You will not that there is significant oportunity for overwriting files,
and the user must be responsible for double checking that all inputs 
are correct and will not result in life crushing disaster for themselves
or a friend when that super special file gets over-written.</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="pypec.gpec.InputSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypec.gpec.</span></span><span class="sig-name descname"><span class="pre">InputSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rundir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Users/nlogan/Code/gpec/bin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Users/nlogan/Code/gpec/input'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/gpec.html#InputSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.gpec.InputSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class designed to hold the standard inputs for a run.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><ul class="simple">
<li><p>rundir: str. Location of executables, .dat files, and extra .in files.</p></li>
<li><p>indir: str. Location of .in files read in and stored here</p></li>
<li><p>infiles: dict. Tree like storage of namelist objects.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.gpec.nustarscan">
<span class="sig-prename descclassname"><span class="pre">pypec.gpec.</span></span><span class="sig-name descname"><span class="pre">nustarscan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.1,</span> <span class="pre">1.0,</span> <span class="pre">10.0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pentfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pent.in'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scalet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/gpec.html#nustarscan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.gpec.nustarscan" title="Permalink to this definition">¶</a></dt>
<dd><p>Run pent for series of <em>approximately</em> scaled collisionality values.
Default scaling holds P=NT constant (NTV~P), but this is broken using
scalen or scalet (scalet=False, for example, scales only density).</p>
<p>User may want to include a non-zero ximag if going to low collisionality.</p>
<p>User must specify full path to all files named in the pent input.</p>
<p>Kinetic file must have header with ‘n’ and ‘i’ in the ion density label
but no other label, both ‘t’ and ‘e’ in only the electron temperature label,
‘omega’ omega_EXB label, etc.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Approximate scaling ignores log-Lambda dependence, and uses
nu_star ~ nu/v_th ~ (NT^-3/2)/(T^1/2) ~ N/T^2.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base</strong> – str. Top level directory containing dcon and gpec runs. Must contain euler.bin file.</p></li>
<li><p><strong>scale</strong> – ndarray. The scale factors iterated over.</p></li>
<li><p><strong>pentfile</strong> – str. Original input file.</p></li>
<li><p><strong>scalen</strong> – bool.Use density scaling to change nu_star.</p></li>
<li><p><strong>scalet</strong> – bool.Use temperature scaling to change nu_star.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool. True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.gpec.omegascan">
<span class="sig-prename descclassname"><span class="pre">pypec.gpec.</span></span><span class="sig-name descname"><span class="pre">omegascan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">omega</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'wp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-2,</span> <span class="pre">-1,</span> <span class="pre">-0.5,</span> <span class="pre">0.5,</span> <span class="pre">1,</span> <span class="pre">2)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pentrcfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pentrc.in'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/gpec.html#omegascan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.gpec.omegascan" title="Permalink to this definition">¶</a></dt>
<dd><p>Run pent for series of scaled nu/omega_phi/omega_E/omega_D/gamma_damp values. 
User must specify full path to all files named in pent.in input file
located in the base directory.
Note that the rotation profile is scaled by manipulating omega_E
on each surface to obtain the scaled rotation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>omega</strong> – str. Choose from nu, wp, we, wd, or ga</p></li>
<li><p><strong>base</strong> – str. Top level directory containing dcon and gpec runs. Must contain euler.bin file.</p></li>
<li><p><strong>scale</strong> – ndarray. The scale factors iterated over.</p></li>
<li><p><strong>pentfile</strong> – str. Original input file.</p></li>
<li><p><strong>rundcon</strong> – bool. Set true if using hybrid kinetic MHD DCON. Will also attempt GPEC + PENT.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool. True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.gpec.optntv">
<span class="sig-prename descclassname"><span class="pre">pypec.gpec.</span></span><span class="sig-name descname"><span class="pre">optntv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rundir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Users/nlogan/Code/gpec/bin/'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/gpec.html#optntv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.gpec.optntv" title="Permalink to this definition">¶</a></dt>
<dd><p>Python wrapper for running gpec package multiple times in
a search for the normalized spectrum that maximizes NTV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mlist</strong> – list. Integer poloidal modes included on plasma surface.</p></li>
<li><p><strong>maxiter</strong> – int.Maximum number of iterations.</p></li>
<li><p><strong>loc</strong> – str. Directory location for run.</p></li>
<li><p><strong>rundir</strong> – str. GPEC package directory with executables and .dat files.</p></li>
<li><p><strong>kwargs</strong> – <p>dict. namelist instance(s) written to &lt;kwarg&gt;.in file(s).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Namelists taken from (in order of priority):
1) Key word arguments 
2) .in files from loc
3) .in files from rundir</p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool. True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.gpec.optpentrc">
<span class="sig-prename descclassname"><span class="pre">pypec.gpec.</span></span><span class="sig-name descname"><span class="pre">optpentrc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">range(-5,</span> <span class="pre">25)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ttype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tgar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perp1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qsub</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Powell'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rundir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Users/nlogan/Code/gpec/bin/'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/gpec.html#optpentrc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.gpec.optpentrc" title="Permalink to this definition">¶</a></dt>
<dd><p>Python wrapper for running gpec packages multiple times in
a search for the normalized spectrum that maximizes NTV.</p>
<p>Approach is as follows:
1) Run DCON and GPEC in base directory with singcoup_flag True
2) Run GPEC twice for each m, creating new subdirectories cosmn* and sinmn*
3) Optimize a functional wrapper for PENTRC using optimize.fmin_slsqp
- Spectra constrained to have 1 Gm^2 norm
- wrapper uses data package to linearly combine gpec_xclebsch outputs
- Initial guess is the first singcoup_svd mode from GPEC</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ms</strong> – list. Integer poloidal modes included on plasma surface.</p></li>
<li><p><strong>ttype</strong> – str.PENTRC_OUTPUT flag (fgar,tgar,rlar,etc).</p></li>
<li><p><strong>tfac</strong> – int.Optimization minimizes tfac*|T_phi|. Negative values maximize applied NTV.</p></li>
<li><p><strong>perp1</strong> – bool.Optimizes in space perpendicular to 1st GPEC SVD mode.</p></li>
<li><p><strong>norm</strong> – float.Amplitude of applied area normalized spectrum Phi_x (Tesla meter^2).</p></li>
<li><p><strong>qsub</strong> – bool.Submits individual jobs to cluster. Use gpec.run for qsub overall optimizer.</p></li>
<li><p><strong>method</strong> – str.Method used in scipy.optimize.minimize.</p></li>
<li><p><strong>maxiter</strong> – int.Maximum number of iterations.</p></li>
<li><p><strong>loc</strong> – str. Directory location for run.</p></li>
<li><p><strong>rundir</strong> – str. GPEC package directory with executables and .dat files.</p></li>
<li><p><strong>kwargs</strong> – <p>dict. namelist instance(s) written to &lt;kwarg&gt;.in file(s).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Namelists taken from (in order of priority):
1) Key word arguments 
2) .in files from loc
3) .in files from rundir</p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool. True.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.gpec.run">
<span class="sig-prename descclassname"><span class="pre">pypec.gpec.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rundir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Users/nlogan/Code/gpec/bin/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">submit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_on_complete</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rerun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rundcon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rungpec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runpentrc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runrdcon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runstride</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cleandcon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'1.3'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mailon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NONE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">email</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mem</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">36</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'general'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runipec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qsub</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/gpec.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.gpec.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Python wrapper for running gpec package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>loc</strong> – str. Directory location for run.</p></li>
<li><p><strong>rundir</strong> – str. GPEC package directory with executables and .dat files.</p></li>
<li><p><strong>submit</strong> – bool. Submit job to cluster.</p></li>
<li><p><strong>return_on_complete</strong> – bool. Return only after job is finished on cluster (irrelevant if qsub=False).</p></li>
<li><p><strong>rerun</strong> – bool. Does not delete existing .out files.</p></li>
<li><p><strong>rundcon</strong> – bool. Run dcon.</p></li>
<li><p><strong>runipec</strong> – bool. Run ipec.</p></li>
<li><p><strong>rungpec</strong> – bool. Run gpec.</p></li>
<li><p><strong>runpentrc</strong> – bool. Run pentrc.</p></li>
<li><p><strong>runrdcon</strong> – bool. Run rdcon and rmatch.</p></li>
<li><p><strong>runstride</strong> – bool. Run stride.</p></li>
<li><p><strong>cleandcon</strong> – bool. Remove euler.bin file after run is complete.</p></li>
<li><p><strong>fill_inputs</strong> – bool. Use inputs from rundir (see kwargs).</p></li>
<li><p><strong>version</strong> – str. Version of GPEC loaded (may set compilers if 1.2 or later)</p></li>
<li><p><strong>mailon</strong> – str. Choose from NONE, BEGIN, END, FAIL, REQUEUE, or ALL.</p></li>
<li><p><strong>email</strong> – str. Email address (default is submitting user).</p></li>
<li><p><strong>mem</strong> – floatMemory request of q-submission in megabytes (converted to integer).</p></li>
<li><p><strong>hours</strong> – int. Number of hours requested from job manager.</p></li>
<li><p><strong>partition</strong> – str. Specify a specific computing queue.</p></li>
<li><p><strong>kwargs</strong> – dict. namelist instance(s) written to &lt;kwarg&gt;.in file(s).</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Namelists taken from (in order of priority): 
1) Key word arguments 
2) .in files from loc
3) .in files from rundir</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bool. True.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-pypec.namelist"></span><section id="pypec-namelist-io-for-fortran-namelists">
<h2><a class="reference internal" href="#module-pypec.namelist" title="pypec.namelist"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.namelist</span></code></a> – IO for FORTRAN Namelists<a class="headerlink" href="#pypec-namelist-io-for-fortran-namelists" title="Permalink to this heading">¶</a></h2>
<p>This module provides pythonic tools for reading and writing
fortran namelists.</p>
<section id="id1">
<h3>Examples<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>This module can be used to convert FORTRAN namelist files into
python ordered dictionary type objects. The individual namelists are
capitalized and their paramters are left as written. The actual
parameter is thus stored two levels deep in the dictionary.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nl</span><span class="o">=</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;examples/example_namelist.in&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nl</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;GPEC_INPUT&#39;, &#39;GPEC_CONTROL&#39;, &#39;GPEC_OUTPUT&#39;, &#39;GPEC_DIAGNOSE&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nl</span><span class="p">[</span><span class="s1">&#39;GPEC_CONTROL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;resp_index&#39;, &#39;sing_spot&#39;, &#39;reg_flag&#39;, &#39;reg_spot&#39;, &#39;chebyshev_flag&#39;, &#39;nche&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nl</span><span class="p">[</span><span class="s1">&#39;GPEC_CONTROL&#39;</span><span class="p">][</span><span class="s1">&#39;reg_spot&#39;</span><span class="p">]</span>
<span class="go">0.05</span>
</pre></div>
</div>
<p>The parameters can be changed, added, or deleted as in any python
dictionary.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nl</span><span class="p">[</span><span class="s1">&#39;GPEC_CONTROL&#39;</span><span class="p">][</span><span class="s1">&#39;reg_spot&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.01</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nl</span><span class="p">[</span><span class="s1">&#39;GPEC_CONTROL&#39;</span><span class="p">][</span><span class="s1">&#39;reg_spot&#39;</span><span class="p">]</span>
<span class="go">0.01</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">nl</span><span class="p">[</span><span class="s1">&#39;GPEC_CONTROL&#39;</span><span class="p">][</span><span class="s1">&#39;nche&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nl</span><span class="p">[</span><span class="s1">&#39;GPEC_CONTROL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;resp_index&#39;, &#39;sing_spot&#39;, &#39;reg_flag&#39;, &#39;reg_spot&#39;, &#39;chebyshev_flag&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nl</span><span class="p">[</span><span class="s1">&#39;GPEC_CONTROL&#39;</span><span class="p">][</span><span class="s1">&#39;nche&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span>
</pre></div>
</div>
<p>The resulting namelists can then be re-written in ASCII format
for use with the FORTAN codes.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">write</span><span class="p">(</span><span class="n">nl</span><span class="p">,</span><span class="s1">&#39;examples/example_namelist_edit.in&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These examples can be tested by developers using ipython as follows:</p>
<blockquote>
<div><p>In [1]: import pypec.namelist,doctest</p>
<p>In [2]: doctest.testmod(pypec.namelist,verbose=True)</p>
</div></blockquote>
</div>
</section>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="pypec.namelist.Objectify">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypec.namelist.</span></span><span class="sig-name descname"><span class="pre">Objectify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/namelist.html#Objectify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.namelist.Objectify" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Class base to convert iterable to instance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.namelist.read">
<span class="sig-prename descclassname"><span class="pre">pypec.namelist.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'!'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/namelist.html#read"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.namelist.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read in a file. Must have namelists in series, not embedded.
Assumes name of list preceded by ‘&amp;’ and list ends with a single backslash.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – str. Path to input namelist.</p></li>
<li><p><strong>out_type</strong> – str. Can be either ‘dict’ or ‘obj’.</p></li>
<li><p><strong>comment</strong> – str. Lines starting with any of these characters are considered annotations.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dict (object). Top keys (attributes) are namelists with sub-key(-attribute) parameter values.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned dict is actually “OrderedDict” type from
collections module. If returning an object, the object is
un-ordered.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.namelist.write">
<span class="sig-prename descclassname"><span class="pre">pypec.namelist.</span></span><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/namelist.html#write"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.namelist.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write namelist object to file for fortran interface.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nl</strong> – object. namelist object from read(). Can be dictionary or Objectify type class.</p></li>
<li><p><strong>filename</strong> – str. Path of file to be written.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bool. True.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-pypec.modplot"></span><section id="pypec-modplot-matplotlib-customizations">
<h2><a class="reference internal" href="#module-pypec.modplot" title="pypec.modplot"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec.modplot</span></code></a> – matplotlib Customizations<a class="headerlink" href="#pypec-modplot-matplotlib-customizations" title="Permalink to this heading">¶</a></h2>
<p>Collection of modified matplotlib functions and objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>Plot complex arguments.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">subplots</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lines</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mf">0.5</span><span class="n">j</span><span class="p">),</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Automatically resize plots to fit labels.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">xlbl</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;X AXIS&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Plot huge data sets quickly.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mf">1e5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">1e5</span><span class="p">)</span><span class="o">/</span><span class="mf">1.5e4</span><span class="o">+</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mf">1e5</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">newline</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">data</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;large data set&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This plots a line capped at 1000-pts by default. The maximum number
of points is maintained as you manipulate the axis, so zooming
in will provide you with new points and increased detail until the
window samples fewer than that many points in the orginal data. The
first two lines, for instance, contain only their original 10 points
(not 1000 interpolated points).</p>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="pypec.modplot.MidPointNorm">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">MidPointNorm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">midpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#MidPointNorm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.MidPointNorm" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Normalize</span></code></p>
<p>Taken from <a class="reference external" href="http://stackoverflow.com/questions/7404116/defining-the-midpoint-of-a-colormap-in-matplotlib">http://stackoverflow.com/questions/7404116/defining-the-midpoint-of-a-colormap-in-matplotlib</a></p>
<dl class="py method">
<dt class="sig sig-object py" id="pypec.modplot.MidPointNorm.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#MidPointNorm.inverse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.MidPointNorm.inverse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.add_inset_axes">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">add_inset_axes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rect</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axisbg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'w'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#add_inset_axes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.add_inset_axes" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a axes inset in another axes.
Unlike the native matplotlib inset_axes, here the inset axes can be a polar axes.</p>
<p>Note that the parent axes should be drawn first if using autolayout (changes postion).
The inset axes will not track the original if it is moved.</p>
<p>From <a class="reference external" href="http://stackoverflow.com/questions/17458580/embedding-small-plots-inside-subplots-in-matplotlib/17479417#17479417">http://stackoverflow.com/questions/17458580/embedding-small-plots-inside-subplots-in-matplotlib/17479417#17479417</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> – Axes. Parent axes.</p></li>
<li><p><strong>rect</strong> – list. Inset axes location and dimensions [left, bottom, width, height]</p></li>
<li><p><strong>axisbg</strong> – str. Background color.</p></li>
<li><p><strong>polar</strong> – bool. Polar plot.</p></li>
<li><p><strong>kwargs</strong> – dict. Passed to add_subplot.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Axes. A new inset axes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.colorbar">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">colorbar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mappable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_gridspec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#colorbar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.colorbar" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Modified pyplot colorbar for default use_gridspec=True.</p>
<p>ORIGINAL DOCUMENTATION</p>
</div></blockquote>
<p>Add a colorbar to a plot.</p>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h2>
<dl>
<dt>mappable</dt><dd><p>The <cite>matplotlib.cm.ScalarMappable</cite> (i.e., <cite>~matplotlib.image.AxesImage</cite>,
<cite>~matplotlib.contour.ContourSet</cite>, etc.) described by this colorbar.
This argument is mandatory for the <cite>.Figure.colorbar</cite> method but optional
for the <cite>.pyplot.colorbar</cite> function, which sets the default to the current
image.</p>
<p>Note that one can create a <cite>.ScalarMappable</cite> “on-the-fly” to generate
colorbars not attached to a previously drawn artist, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">cm</span><span class="o">.</span><span class="n">ScalarMappable</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">),</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>cax<span class="classifier"><cite>~matplotlib.axes.Axes</cite>, optional</span></dt><dd><p>Axes into which the colorbar will be drawn.</p>
</dd>
<dt>ax<span class="classifier"><cite>~matplotlib.axes.Axes</cite>, list of Axes, optional</span></dt><dd><p>One or more parent axes from which space for a new colorbar axes will be
stolen, if <em>cax</em> is None.  This has no effect if <em>cax</em> is set.</p>
</dd>
<dt>use_gridspec<span class="classifier">bool, optional</span></dt><dd><p>If <em>cax</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, a new <em>cax</em> is created as an instance of Axes.  If
<em>ax</em> is an instance of Subplot and <em>use_gridspec</em> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, <em>cax</em> is
created as an instance of Subplot using the <code class="xref py py-mod docutils literal notranslate"><span class="pre">gridspec</span></code> module.</p>
</dd>
</dl>
</section>
<section id="returns">
<h2>Returns<a class="headerlink" href="#returns" title="Permalink to this heading">¶</a></h2>
<p>colorbar : <cite>~matplotlib.colorbar.Colorbar</cite></p>
</section>
<section id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this heading">¶</a></h2>
<p>Additional keyword arguments are of two kinds:</p>
<blockquote>
<div><p>axes properties:</p>
<blockquote>
<div><dl>
<dt>location<span class="classifier">None or {‘left’, ‘right’, ‘top’, ‘bottom’}</span></dt><dd><p>The location, relative to the parent axes, where the colorbar axes
is created.  It also determines the <em>orientation</em> of the colorbar
(colorbars on the left and right are vertical, colorbars at the top
and bottom are horizontal).  If None, the location will come from the
<em>orientation</em> if it is set (vertical colorbars on the right, horizontal
ones at the bottom), or default to ‘right’ if <em>orientation</em> is unset.</p>
</dd>
<dt>orientation<span class="classifier">None or {‘vertical’, ‘horizontal’}</span></dt><dd><p>The orientation of the colorbar.  It is preferable to set the <em>location</em>
of the colorbar, as that also determines the <em>orientation</em>; passing
incompatible values for <em>location</em> and <em>orientation</em> raises an exception.</p>
</dd>
<dt>fraction<span class="classifier">float, default: 0.15</span></dt><dd><p>Fraction of original axes to use for colorbar.</p>
</dd>
<dt>shrink<span class="classifier">float, default: 1.0</span></dt><dd><p>Fraction by which to multiply the size of the colorbar.</p>
</dd>
<dt>aspect<span class="classifier">float, default: 20</span></dt><dd><p>Ratio of long to short dimensions.</p>
</dd>
<dt>pad<span class="classifier">float, default: 0.05 if vertical, 0.15 if horizontal</span></dt><dd><p>Fraction of original axes between colorbar and new image axes.</p>
</dd>
<dt>anchor<span class="classifier">(float, float), optional</span></dt><dd><p>The anchor point of the colorbar axes.
Defaults to (0.0, 0.5) if vertical; (0.5, 1.0) if horizontal.</p>
</dd>
<dt>panchor<span class="classifier">(float, float), or <em>False</em>, optional</span></dt><dd><p>The anchor point of the colorbar parent axes. If <em>False</em>, the parent
axes’ anchor will be unchanged.
Defaults to (1.0, 0.5) if vertical; (0.5, 0.0) if horizontal.</p>
</dd>
</dl>
</div></blockquote>
<p>colorbar properties:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>extend</em></p></td>
<td><p>{‘neither’, ‘both’, ‘min’, ‘max’}
If not ‘neither’, make pointed end(s) for out-of-
range values.  These are set for a given colormap
using the colormap set_under and set_over methods.</p></td>
</tr>
<tr class="row-odd"><td><p><em>extendfrac</em></p></td>
<td><p>{<em>None</em>, ‘auto’, length, lengths}
If set to <em>None</em>, both the minimum and maximum
triangular colorbar extensions with have a length of
5% of the interior colorbar length (this is the
default setting). If set to ‘auto’, makes the
triangular colorbar extensions the same lengths as
the interior boxes (when <em>spacing</em> is set to
‘uniform’) or the same lengths as the respective
adjacent interior boxes (when <em>spacing</em> is set to
‘proportional’). If a scalar, indicates the length
of both the minimum and maximum triangular colorbar
extensions as a fraction of the interior colorbar
length. A two-element sequence of fractions may also
be given, indicating the lengths of the minimum and
maximum colorbar extensions respectively as a
fraction of the interior colorbar length.</p></td>
</tr>
<tr class="row-even"><td><p><em>extendrect</em></p></td>
<td><p>bool
If <em>False</em> the minimum and maximum colorbar extensions
will be triangular (the default). If <em>True</em> the
extensions will be rectangular.</p></td>
</tr>
<tr class="row-odd"><td><p><em>spacing</em></p></td>
<td><p>{‘uniform’, ‘proportional’}
Uniform spacing gives each discrete color the same
space; proportional makes the space proportional to
the data interval.</p></td>
</tr>
<tr class="row-even"><td><p><em>ticks</em></p></td>
<td><p><em>None</em> or list of ticks or Locator
If None, ticks are determined automatically from the
input.</p></td>
</tr>
<tr class="row-odd"><td><p><em>format</em></p></td>
<td><p>None or str or Formatter
If None, <cite>~.ticker.ScalarFormatter</cite> is used.
If a format string is given, e.g., ‘%.3f’, that is used.
An alternative <cite>~.ticker.Formatter</cite> may be given instead.</p></td>
</tr>
<tr class="row-even"><td><p><em>drawedges</em></p></td>
<td><p>bool
Whether to draw lines at color boundaries.</p></td>
</tr>
<tr class="row-odd"><td><p><em>label</em></p></td>
<td><p>str
The label on the colorbar’s long axis.</p></td>
</tr>
</tbody>
</table>
<p>The following will probably be useful only in the context of
indexed colors (that is, when the mappable has norm=NoNorm()),
or other unusual circumstances.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>boundaries</em></p></td>
<td><p>None or a sequence</p></td>
</tr>
<tr class="row-odd"><td><p><em>values</em></p></td>
<td><p>None or a sequence which must be of length 1 less
than the sequence of <em>boundaries</em>. For each region
delimited by adjacent entries in <em>boundaries</em>, the
colormapped to the corresponding value in values
will be used.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
<p>If <em>mappable</em> is a <cite>~.contour.ContourSet</cite>, its <em>extend</em> kwarg is included
automatically.</p>
<p>The <em>shrink</em> kwarg provides a simple way to scale the colorbar with respect
to the axes. Note that if <em>cax</em> is specified, it determines the size of the
colorbar and <em>shrink</em> and <em>aspect</em> kwargs are ignored.</p>
<p>For more precise control, you can manually specify the positions of
the axes objects in which the mappable and the colorbar are drawn.  In
this case, do not use any of the axes properties kwargs.</p>
<p>It is known that some vector graphics viewers (svg and pdf) renders white gaps
between segments of the colorbar.  This is due to bugs in the viewers, not
Matplotlib.  As a workaround, the colorbar can be rendered with overlapping
segments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cbar</span> <span class="o">=</span> <span class="n">colorbar</span><span class="p">()</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">solids</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="s2">&quot;face&quot;</span><span class="p">)</span>
<span class="n">draw</span><span class="p">()</span>
</pre></div>
</div>
<p>However this has negative consequences in other circumstances, e.g. with
semi-transparent images (alpha &lt; 1) and colorbar extensions; therefore, this
workaround is not used by default (see issue #1188).</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.figure">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facecolor=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">edgecolor=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frameon=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FigureClass=&lt;class</span> <span class="pre">'matplotlib.figure.Figure'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.figure" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.line_downsample">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">line_downsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">line</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#line_downsample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.line_downsample" title="Permalink to this definition">¶</a></dt>
<dd><p>Downsample line data for increased plotting speed.</p>
<dl class="simple">
<dt>Key Word Arguments:</dt><dd><dl class="simple">
<dt>npts<span class="classifier">int.</span></dt><dd><p>Number of data points within axes xlims.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.onkey">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">onkey</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#onkey"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.onkey" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to connect key_press_event events from matplotlib
to custom functions.</p>
<p>Matplotlib defaults (may be changed in matplotlibrc):</p>
<p>keymap.fullscreen : f               # toggling
keymap.home : h, r, home            # home or reset mnemonic
keymap.back : left, c, backspace    # forward / backward keys to enable
keymap.forward : right, v           #   left handed quick navigation
keymap.pan : p                      # pan mnemonic
keymap.zoom : o                     # zoom mnemonic
keymap.save : s                     # saving current figure
keymap.quit : ctrl+w                # close the current figure
keymap.grid : g                     # switching on/off a grid in current axes
keymap.yscale : l                   # toggle scaling of y-axes (‘log’/’linear’)
keymap.xscale : L, k                # toggle scaling of x-axes (‘log’/’linear’)
keymap.all_axes : a                 # enable all axes</p>
<p>My custom function mapping:</p>
<p>popaxes : n                         #Creates new figure with current axes
tighten : t                         #Call tight_layout bound method for figure</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.plot_axes">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">plot_axes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geometry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#plot_axes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.plot_axes" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-create a given axis in a new figure. This allows, for instance,
a subplot to be moved to its own figure where it can be manipulated
and/or saved independent of the original.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>ax<span class="classifier">obj.</span></dt><dd><p>An initialized Axes object</p>
</dd>
</dl>
</dd>
<dt>Key Word Arguments:</dt><dd><dl class="simple">
<dt>fig: obj.</dt><dd><p>A figure in which to re-create the axis</p>
</dd>
<dt>geometry<span class="classifier">tuple.</span></dt><dd><p>Axes geometry of re-created axis</p>
</dd>
</dl>
</dd>
<dt>returns</dt><dd><p>Figure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.png_to_gif">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">png_to_gif</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gif_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#png_to_gif"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.png_to_gif" title="Permalink to this definition">¶</a></dt>
<dd><p>gif_file should end in .gif</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.printlines">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">printlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labeled_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squeeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#printlines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.printlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Print all data in line plot(s) to text file.The x values
will be taken from the line with the greatest number of
points in the (first) axis, and other lines are interpolated
if their x values do not match. Column lables are the
line labels and xlabel.</p>
<dl class="simple">
<dt>Arguments:</dt><dd><dl class="simple">
<dt>filename<span class="classifier">str.</span></dt><dd><p>Path to print to.</p>
</dd>
</dl>
</dd>
<dt>Key Word Arguments:</dt><dd><dl class="simple">
<dt>labeled_only<span class="classifier">bool</span></dt><dd><p>Only print labeled lines to file.</p>
</dd>
<dt>squeeze<span class="classifier">bool.</span></dt><dd><p>Print lines from all axes in a single table.</p>
</dd>
</dl>
</dd>
<dt>returns</dt><dd><dl class="simple">
<dt>bool.</dt><dd><p>True.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.set_linearray">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">set_linearray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#set_linearray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.set_linearray" title="Permalink to this definition">¶</a></dt>
<dd><p>Set colors of lines to colormaping of values.</p>
<p>Other good sequential colormaps are YlOrBr and autumn.
A good diverging colormap is bwr.</p>
<dl class="simple">
<dt><strong>Arguments:</strong></dt><dd><ul class="simple">
<li><p>lines : list. Lines to get set colors.</p></li>
</ul>
</dd>
<dt><strong>Key Word Arguments:</strong></dt><dd><ul class="simple">
<li><p>values : array like. Values corresponding to each line. Default is indexing.</p></li>
<li><p>cmap : str. Valid matplotlib colormap name.</p></li>
<li><p>vmax : float. Upper bound of colormaping.</p></li>
<li><p>vmin : float. Lower bound of colormaping.</p></li>
</ul>
</dd>
<dt><strong>Returns:</strong></dt><dd><ul class="simple">
<li><p>ScalarMappable. A mapping object used for colorbars.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.set_style">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">set_style</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#set_style"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.set_style" title="Permalink to this definition">¶</a></dt>
<dd><p>Seaborn set_style with additional ‘thick’,</p>
<p>Thick (thin) style multiplies rcParams axes.linewidth, lines.linewidth,
xtick.major.width, xtick.minor.width, ytick.major.width, and
ytick.minor.width by 2 (0.5).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.shiftedColorMap">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">shiftedColorMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">midpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'shiftedcmap'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#shiftedColorMap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.shiftedColorMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to offset the “center” of a colormap. Useful for
data with a negative min and positive max and you want the
middle of the colormap’s dynamic range to be at zero.</p>
<p>Taken from <a class="reference external" href="http://stackoverflow.com/questions/7404116/defining-the-midpoint-of-a-colormap-in-matplotlib">http://stackoverflow.com/questions/7404116/defining-the-midpoint-of-a-colormap-in-matplotlib</a></p>
<dl class="simple">
<dt>Args:</dt><dd><p>cmap: The matplotlib colormap to be altered
start: Offset from lowest point in the colormap’s range. Should be between 0 and ‘midpoint’.
midpoint: The new center of the colormap. Should be between 0.0 and 1.0. Recommended is  1 - vmax/(vmax + abs(vmin)).
stop: Offset from highest point in the colormap’s range. Should be between ‘midpoint’ and 1.0.
name: str. Added to the name of cmap when creating the new colormap.</p>
</dd>
</dl>
<p>Example:</p>
<p>The following creates a shifted colormap that can be used in matplotlib arguments,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">orig_cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">coolwarm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shifted_cmap</span> <span class="o">=</span> <span class="n">shiftedColorMap</span><span class="p">(</span><span class="n">orig_cmap</span><span class="p">,</span> <span class="n">midpoint</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;shifted&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.subplots">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">subplots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nrows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sharex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sharey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squeeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autosize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subplot_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">powerlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(-3,</span> <span class="pre">3)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">useOffset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nybins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxbins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">fig_kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#subplots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.subplots" title="Permalink to this definition">¶</a></dt>
<dd><p>Matplotlib subplots with default figsize = rcp_size*[ncols,nrows]
fig_kw.setdefault(‘figsize’,figsize).</p>
<dl class="simple">
<dt>Additional Key Word Arguments:</dt><dd><dl class="simple">
<dt>powlim<span class="classifier">tuple.</span></dt><dd><p>Axis labels use scientific notion above 10^power.</p>
</dd>
<dt>useOffset<span class="classifier">bool.</span></dt><dd><p>Axis labels use offset if range&lt;&lt;average.</p>
</dd>
</dl>
</dd>
</dl>
<p>Accepts standargs args and kwargs for pyplot.subplots.</p>
<p>ORIGINAL DOCUMENTATION</p>
<p>Create a figure and a set of subplots.</p>
<p>This utility wrapper makes it convenient to create common layouts of
subplots, including the enclosing figure object, in a single call.</p>
<section id="id2">
<h2>Parameters<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<dl>
<dt>nrows, ncols<span class="classifier">int, default: 1</span></dt><dd><p>Number of rows/columns of the subplot grid.</p>
</dd>
<dt>sharex, sharey<span class="classifier">bool or {‘none’, ‘all’, ‘row’, ‘col’}, default: False</span></dt><dd><p>Controls sharing of properties among x (<em>sharex</em>) or y (<em>sharey</em>)
axes:</p>
<ul class="simple">
<li><p>True or ‘all’: x- or y-axis will be shared among all subplots.</p></li>
<li><p>False or ‘none’: each subplot x- or y-axis will be independent.</p></li>
<li><p>‘row’: each subplot row will share an x- or y-axis.</p></li>
<li><p>‘col’: each subplot column will share an x- or y-axis.</p></li>
</ul>
<p>When subplots have a shared x-axis along a column, only the x tick
labels of the bottom subplot are created. Similarly, when subplots
have a shared y-axis along a row, only the y tick labels of the first
column subplot are created. To later turn other subplots’ ticklabels
on, use <cite>~matplotlib.axes.Axes.tick_params</cite>.</p>
<p>When subplots have a shared axis that has units, calling
<cite>~matplotlib.axis.Axis.set_units</cite> will update each axis with the
new units.</p>
</dd>
<dt>squeeze<span class="classifier">bool, default: True</span></dt><dd><ul class="simple">
<li><p>If True, extra dimensions are squeezed out from the returned
array of <cite>~matplotlib.axes.Axes</cite>:</p>
<ul>
<li><p>if only one subplot is constructed (nrows=ncols=1), the
resulting single Axes object is returned as a scalar.</p></li>
<li><p>for Nx1 or 1xM subplots, the returned object is a 1D numpy
object array of Axes objects.</p></li>
<li><p>for NxM, subplots with N&gt;1 and M&gt;1 are returned as a 2D array.</p></li>
</ul>
</li>
<li><p>If False, no squeezing at all is done: the returned Axes object is
always a 2D array containing Axes instances, even if it ends up
being 1x1.</p></li>
</ul>
</dd>
<dt>subplot_kw<span class="classifier">dict, optional</span></dt><dd><p>Dict with keywords passed to the
<cite>~matplotlib.figure.Figure.add_subplot</cite> call used to create each
subplot.</p>
</dd>
<dt>gridspec_kw<span class="classifier">dict, optional</span></dt><dd><p>Dict with keywords passed to the <cite>~matplotlib.gridspec.GridSpec</cite>
constructor used to create the grid the subplots are placed on.</p>
</dd>
<dt><a href="#id3"><span class="problematic" id="id4">**</span></a>fig_kw</dt><dd><p>All additional keyword arguments are passed to the
<cite>.pyplot.figure</cite> call.</p>
</dd>
</dl>
</section>
<section id="id5">
<h2>Returns<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<p>fig : <cite>~.figure.Figure</cite></p>
<dl>
<dt>ax<span class="classifier"><cite>.axes.Axes</cite> or array of Axes</span></dt><dd><p><em>ax</em> can be either a single <cite>~matplotlib.axes.Axes</cite> object or an
array of Axes objects if more than one subplot was created.  The
dimensions of the resulting array can be controlled with the squeeze
keyword, see above.</p>
<p>Typical idioms for handling the return value are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># using the variable ax for single a Axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="c1"># using the variable axs for multiple Axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># using tuple unpacking for multiple Axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">((</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">),</span> <span class="p">(</span><span class="n">ax3</span><span class="p">,</span> <span class="n">ax4</span><span class="p">))</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The names <code class="docutils literal notranslate"><span class="pre">ax</span></code> and pluralized <code class="docutils literal notranslate"><span class="pre">axs</span></code> are preferred over <code class="docutils literal notranslate"><span class="pre">axes</span></code>
because for the latter it’s not clear if it refers to a single
<cite>~.axes.Axes</cite> instance or a collection of these.</p>
</dd>
</dl>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h2>
<p>.pyplot.figure
.pyplot.subplot
.pyplot.axes
.Figure.subplots
.Figure.add_subplot</p>
</section>
<section id="id6">
<h2>Examples<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># First create some toy data:</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create just a figure and only one subplot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Simple plot&#39;</span><span class="p">)</span>

<span class="c1"># Create two subplots and unpack the output array immediately</span>
<span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Sharing Y axis&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="c1"># Create four polar axes and access them through the returned array</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">subplot_kw</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s2">&quot;polar&quot;</span><span class="p">))</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="c1"># Share a X axis with each column of subplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="s1">&#39;col&#39;</span><span class="p">)</span>

<span class="c1"># Share a Y axis with each row of subplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="s1">&#39;row&#39;</span><span class="p">)</span>

<span class="c1"># Share both X and Y axes with all subplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

<span class="c1"># Note that this is the same as</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Create figure number 10 with a single subplot</span>
<span class="c1"># and clears it if it already exists.</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pypec.modplot.xyaxes">
<span class="sig-prename descclassname"><span class="pre">pypec.modplot.</span></span><span class="sig-name descname"><span class="pre">xyaxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pypec/modplot.html#xyaxes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pypec.modplot.xyaxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot hline and vline through (0,0).</p>
<dl class="simple">
<dt><strong>Arguments:</strong></dt><dd><ul class="simple">
<li><p>axes : obj. Matplotlib Axes object.</p></li>
</ul>
</dd>
<dt><strong>key Word Arguments:</strong></dt><dd><ul class="simple">
<li><p>x : bool. Draw hline</p></li>
<li><p>y : bool. Draw vline</p></li>
</ul>
</dd>
<dt><strong>Returns:</strong></dt><dd><ul class="simple">
<li><p>bool.</p></li>
</ul>
</dd>
</dl>
<p>All other kwargs passed to hlines and vlines functions.</p>
</dd></dl>

<span class="target" id="module-regression"></span><span class="target" id="module-regression.compare"></span><section id="regression-compare-for-comparing-restults">
<h2><a class="reference internal" href="#module-regression.compare" title="regression.compare"><code class="xref py py-mod docutils literal notranslate"><span class="pre">regression.compare</span></code></a> – For Comparing Restults<a class="headerlink" href="#regression-compare-for-comparing-restults" title="Permalink to this heading">¶</a></h2>
<p>Python modules for regression testing and benchmarking GPEC
code developments.</p>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>N.C. Logan</p>
</dd>
<dt class="field-even">Location</dt>
<dd class="field-even"><p>Princeton Plasma Physics Laboratory</p>
</dd>
<dt class="field-odd">Email</dt>
<dd class="field-odd"><p><a class="reference external" href="mailto:nlogan&#37;&#52;&#48;pppl&#46;gov">nlogan<span>&#64;</span>pppl<span>&#46;</span>gov</a></p>
</dd>
</dl>
<section id="interface">
<h3>Interface<a class="headerlink" href="#interface" title="Permalink to this heading">¶</a></h3>
<p>The compare submodules can be run as an executable from a linux terminal, and take one or more directory paths as arguments. Each check function will be called for the directories and the plots displayed. Be warned, this may create a large number of plots.</p>
<p>For example,</p>
<blockquote>
<div><p>$ ./compare_dcons.py /p/gpec/GPEC-0.4/docs/examples/DIIID_example /p/gpec/GPEC-1.0/docs/examples/DIIID_ideal_example</p>
</div></blockquote>
<p>Individual checks can be called from an interactive python environment (see <a class="reference internal" href="#module-pypec" title="pypec"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pypec</span></code></a>).</p>
<p>For example,</p>
<blockquote>
<div><p>$ ipython –pylab</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">regression.compare</span> <span class="kn">import</span> <span class="n">compare_dcons</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">compare_dcons</span><span class="o">.</span><span class="n">check_energies</span><span class="p">(</span><span class="s1">&#39;/p/gpec/GPEC-0.4/docs/examples/DIIID_example&#39;</span><span class="p">,</span><span class="s1">&#39;/p/gpec/GPEC-1.0/docs/examples/DIIID_ideal_example&#39;</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>/p/gpec/GPEC-0.4/d…              /p/gpec/GPEC-1.0/d…</p>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 48%" />
<col style="width: 39%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>total</p></td>
<td><p>+7.3090e-01</p></td>
<td><p>+9.0210e-01+7.0180e-05j</p></td>
</tr>
<tr class="row-even"><td><p>plasma</p></td>
<td><p>-1.7540e+00</p></td>
<td><p>-1.6000e+00</p></td>
</tr>
<tr class="row-odd"><td><p>vacuum</p></td>
<td><p>+2.4850e+00</p></td>
<td><p>+2.5020e+00</p></td>
</tr>
</tbody>
</table>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyplot</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;examples/figures/example_compare_dcons.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="examples/figures/example_compare_dcons.png"><img alt="examples/figures/example_compare_dcons.png" src="examples/figures/example_compare_dcons.png" style="width: 600px;" /></a>
</section>
</section>
</section>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/source_documentation.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2007 The Trustees of Princeton University.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>