<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Outputs and Post-Processing &#8212; GPEC 1.2.3 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="DCON README" href="dcon_readme.html" />
    <link rel="prev" title="Getting started" href="getting_started.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="index.html"><img src="_static/logo.png" border="0" alt="py4sci"/></a>
</div>



  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          GPEC</a>
        <span class="navbar-text navbar-version pull-left"><b>1.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="references.html">Research</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="examples.html">Learn</a></li>
                <li><a href="developers.html">Develop</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="source_documentation.html">Code</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Jump to <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#gpec-user-agreement">GPEC User Agreement</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#public">Public</a></li>
<li class="toctree-l3"><a class="reference internal" href="getting_started.html#personal">Personal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#running-using-omfit">Running using OMFIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#manual-run-process">Manual Run Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#a-word-on-coordinates">A Word On Coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#inputs">Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#results">Results</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Outputs and Post-Processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#choice-of-spectral-decomposition">Choice of Spectral Decomposition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#comparing-to-real-space-quantities">Comparing to Real Space Quantities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interfacing-with-surfmn">Interfacing with SURFMN</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interfacing-with-vacuum">Interfacing with VACUUM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#coordinates">Coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output-files">Output Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ascii-file-outputs">ASCII File Outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#binary-file-outputs">Binary File Outputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#xdraw">xdraw</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dcon_readme.html">DCON README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dcon_readme.html#determining-the-mhd-stability-of-axisymmetric-toroidal-plasmas">Determining the MHD Stability of Axisymmetric Toroidal Plasmas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-1-introduction">Section 1. Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-2-straight-fieldline-coordinates">Section 2. Straight-Fieldline Coordinates</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-3-installation">Section 3. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-4-equil-input">Section 4. EQUIL Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-5-dcon-input">Section 5. DCON Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-6-vacuum-input">Section 6. VACUUM Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-7-dcon-output">Section 7. DCON Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-8-orbit-input">Section 8. ORBIT Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-9-orbit-input">Section 9. ORBIT Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="dcon_readme.html#section-10-other-documentation">Section 10. Other documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="namelists.html">Namelist Variables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="namelists.html#the-equil-namelist">The EQUIL Namelist</a></li>
<li class="toctree-l2"><a class="reference internal" href="namelists.html#the-dcon-namelist">The DCON Namelist</a></li>
<li class="toctree-l2"><a class="reference internal" href="namelists.html#the-gpec-namelist">The GPEC Namelist</a></li>
<li class="toctree-l2"><a class="reference internal" href="namelists.html#the-pentrc-namelist">The PENTRC Namelist</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Tutorial Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#omfit-tutorial">OMFIT Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#gpec-diii-d-ideal-example">GPEC DIII-D Ideal Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="source_documentation.html">PYPEC Source documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="source_documentation.html#regression-compare-for-comparing-restults"><code class="docutils literal"><span class="pre">regression.compare</span></code> – For Comparing Restults</a><ul>
<li class="toctree-l3"><a class="reference internal" href="source_documentation.html#interface">Interface</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Accessing Releases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="releases.html#princeton-plasma-physics-laboratory">Princeton Plasma Physics Laboratory</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#general-atomics">General Atomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#national-fusion-research-institute">National Fusion Research Institute</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html#release-notes">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-2-3">GPEC v1.2.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#fixes">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-2-2">GPEC v1.2.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#adds">Adds</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#changes">Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id1">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-2-1">GPEC v1.2.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id2">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-2-0">GPEC v1.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id3">Adds</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id4">Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id5">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#removes">Removes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-1-7">GPEC v1.1.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#features">Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-1-6">GPEC v1.1.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id6">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-1-5">GPEC v1.1.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id7">Adds</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id8">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-1-4">GPEC v1.1.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id9">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-1-3">GPEC v1.1.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id10">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-1-2">GPEC v1.1.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id11">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-1-1">GPEC v1.1.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id12">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-1-0">GPEC v1.1.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id13">Adds</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id14">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id15">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-0-6">GPEC v1.0.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id16">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-0-5">GPEC v1.0.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id17">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-0-4">GPEC v1.0.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-0-3">GPEC v1.0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-0-2">GPEC v1.0.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id18">Adds</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id19">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-0-1">GPEC v1.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v1-0-0">GPEC v1.0.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id20">Adds</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id21">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v0-4-0">GPEC v0.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id22">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id23">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id24">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v0-3-5">GPEC v0.3.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id25">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v0-3-4">GPEC v0.3.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id30">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id31">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#speed-and-stability">Speed and Stability</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id32">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v0-3-3">GPEC v0.3.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v0-3-2">GPEC v0.3.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v0-3-1">GPEC v0.3.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id33">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id34">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#performance">Performance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#gpec-v0-3-0">GPEC v0.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id35">Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id36">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id37">Performance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developers Corner</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developers.html#general-perturbed-equilibrium-codes">General Perturbed Equilibrium Codes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="developers.html#development">Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="developers.html#documentation">Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact Information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contact.html#gpec-pent">GPEC &amp; PENT</a></li>
<li class="toctree-l2"><a class="reference internal" href="contact.html#dcon-rdcon">DCON &amp; RDCON</a></li>
<li class="toctree-l2"><a class="reference internal" href="contact.html#stride">STRIDE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Select Publications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="references.html#id1">2007</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html#id2">2009</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html#id6">2010</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html#id7">2011</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html#id9">2012</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html#id11">2013</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><ul>
<li><a class="reference internal" href="#">Outputs and Post-Processing</a><ul>
<li><a class="reference internal" href="#choice-of-spectral-decomposition">Choice of Spectral Decomposition</a><ul>
<li><a class="reference internal" href="#comparing-to-real-space-quantities">Comparing to Real Space Quantities</a></li>
<li><a class="reference internal" href="#interfacing-with-surfmn">Interfacing with SURFMN</a></li>
<li><a class="reference internal" href="#interfacing-with-vacuum">Interfacing with VACUUM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#coordinates">Coordinates</a></li>
<li><a class="reference internal" href="#output-files">Output Files</a><ul>
<li><a class="reference internal" href="#ascii-file-outputs">ASCII File Outputs</a></li>
<li><a class="reference internal" href="#binary-file-outputs">Binary File Outputs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#xdraw">xdraw</a></li>
</ul>
</li>
</ul>

  <li>
    <a href="getting_started.html" title="Previous Chapter: Getting started"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Getting started</span>
    </a>
  </li>
  <li>
    <a href="dcon_readme.html" title="Next Chapter: DCON README"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">DCON README &raquo;</span>
    </a>
  </li>
<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-12 content">
      
  <div class="section" id="outputs-and-post-processing">
<h1>Outputs and Post-Processing<a class="headerlink" href="#outputs-and-post-processing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="choice-of-spectral-decomposition">
<h2>Choice of Spectral Decomposition<a class="headerlink" href="#choice-of-spectral-decomposition" title="Permalink to this headline">¶</a></h2>
<p>When comparing spectral GPEC outputs to real space quantities or to other codes, it is important to remember</p>
<ol class="arabic simple">
<li>GPEC uses a right handed magnetic coordinate system decomposed in <span class="math">\(\exp(im\theta-in\phi)\)</span>.</li>
<li>GPEC effectively uses CCW <span class="math">\(\phi\)</span> for left-handed (LH) configurations, but CW <span class="math">\(\phi\)</span> for right-handed (RH) configurations.</li>
<li>GPEC always uses upward outboard <span class="math">\(\theta\)</span>.</li>
</ol>
<p>The result of this is that the pitch-aligned field will always be positive m. This convention makes in-house analysis nice and easy. For example, one can <em>always</em> plot the m=2 perturbed normal displacement profile and see the resonant surface behavior at q=2. The m=-2 normal displacement will always be nonresonant. This is shown in the figure below from the package DIII-D example, which is a LH plasma.</p>
<a class="reference internal image-reference" href="_images/example_xno_kinkprofile.png"><img alt="_images/example_xno_kinkprofile.png" class="align-center" src="_images/example_xno_kinkprofile.png" style="width: 400px;" /></a>
<p>For another example, the figure below shows a that the positive m fields are magnified for a DIII-D example control surface. We always look here for kink amplification.</p>
<a class="reference internal image-reference" href="_images/example_bnm_positiveamplified.png"><img alt="_images/example_bnm_positiveamplified.png" class="align-center" src="_images/example_bnm_positiveamplified.png" style="width: 400px;" /></a>
<p>The convention does require some awareness from the user when interfacing with real-space quantities and/or other codes though. For example, the user does need to know that the spectrum rotates by <span class="math">\(-\phi\)</span> if real space coil rotates by <span class="math">\(\phi\)</span> in a RH configuration.</p>
<p>To facilitate interfacing with other codes that may have different handedness conventions, the helicity is included in the gpec_control_output netcdf file. The helicity is defined as +1 for right handed plasmas in which Bt and Ip are in the same direction, and -1 for left handed plasmas in which Bt and Ip are apposed.</p>
<div class="section" id="comparing-to-real-space-quantities">
<h3>Comparing to Real Space Quantities<a class="headerlink" href="#comparing-to-real-space-quantities" title="Permalink to this headline">¶</a></h3>
<p>In the real space representation decomposed in <span class="math">\(\exp(-in\phi)\)</span> with CCW <span class="math">\(\phi\)</span>, GPEC takes the complex conjugate of the inverse poloidal Fourier transform for RH configurations. This is restoring CCW <span class="math">\(\phi\)</span> (according to 2), and is done internally before writing function outputs. Note in the full Fourier representation by <span class="math">\(\exp(im\theta-in\phi)\)</span>, the complex conjugate operation does not simply restore CCW phi for RH configurations. It will also flip up and down.</p>
</div>
<div class="section" id="interfacing-with-surfmn">
<h3>Interfacing with SURFMN<a class="headerlink" href="#interfacing-with-surfmn" title="Permalink to this headline">¶</a></h3>
<p>SURFMN is a popular vacuum spectrum code. It calculates the field from experimental coil geometries and/or intrinsic error fields in magnetic coordinates on plasma flux surfaces. SURFMN also uses upward outboard <span class="math">\(\theta\)</span>. However, it expands in <span class="math">\(\exp(-im\theta-in\phi)\)</span> and always uses a CCW <span class="math">\(\phi\)</span>. In SURFMN, the pitch resonant m can flip sign dependending on the sign of Bt and Ip.</p>
<p>As a practical example, interfacing a Fourier representation of the 3D field on a flux surface from GPEC with SURFMN would require using,</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">m_surfmn</span> <span class="o">=</span> <span class="n">helicity</span> <span class="o">*</span> <span class="n">m_gpec</span>
<span class="n">b_surfmn</span> <span class="o">=</span> <span class="n">real</span><span class="p">(</span><span class="n">b_m</span><span class="p">)</span> <span class="o">-</span> <span class="n">i</span> <span class="o">*</span> <span class="n">helicity</span> <span class="o">*</span> <span class="n">imag</span><span class="p">(</span><span class="n">b_m</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>For LH configurations only the sign of m is flipped (according to 1). For RH configurations, m remains unchanged but the complex conjugate is taken (the combined effect of to 1 &amp; 2).</p>
</div>
<div class="section" id="interfacing-with-vacuum">
<h3>Interfacing with VACUUM<a class="headerlink" href="#interfacing-with-vacuum" title="Permalink to this headline">¶</a></h3>
<p>Vacuum is the code used in DCON to calculate the vacuum energy matrices, which combine with the plasma energy matrix to describe the full system eigenmodes. The VACUUM code uses CCW <span class="math">\(\phi\)</span> and downward outboard <span class="math">\(\theta\)</span>. We thus use the complex conjugate of RH configurations to interface GPEC and VACUUM.</p>
</div>
</div>
<div class="section" id="coordinates">
<h2>Coordinates<a class="headerlink" href="#coordinates" title="Permalink to this headline">¶</a></h2>
<p>There are up to 3 separate coordinate systems use in the programs within GPEC package. This include,</p>
<ol class="arabic simple">
<li>The ‘working coordinates’ defined by jac_type in equil.in.</li>
<li>The ‘input coordinates’ defined by jac_in, tmag_in, and jsurf_in when applicable.</li>
<li>The ‘output coordinates’ defined by jac_out, tmag_out, and jsurf_out when applicable.</li>
</ol>
<p>The DCON working coordinate system is used for nearly all internal calculations in the GPEC package, but the external drive may be prescribed in input coordinates (2) and the final perturbed equilibrium results may be converted to output coordinates (3). The working coordinates are magnetic cooridinates. The input and output coordinates may be converted to cylindrical <span class="math">\(\phi\)</span> using the tmag_in or tmag_out variables.</p>
<p>The gpec_control_output_n#.out netcdf file gives spectral quantities in the working coordinates (specified in the ‘jacobian’ attribute). It also provides a J_out matrix. The dot product of this matrix and the b or xi spectra will convert the the output coordinates, reproducing the final table of the gpec_control_n#.out ascii output. Note that the same transformation cannot be safely made for other weighted quantities.</p>
</div>
<div class="section" id="output-files">
<h2>Output Files<a class="headerlink" href="#output-files" title="Permalink to this headline">¶</a></h2>
<p>The GPEC outputs are entirely specified by flags (bool types t or f) set in the GPEC_output section of GPEC.in. All outputs are ASCII files, and can be grouped into two major categories.</p>
<div class="section" id="ascii-file-outputs">
<h3>ASCII File Outputs<a class="headerlink" href="#ascii-file-outputs" title="Permalink to this headline">¶</a></h3>
<p>A number of the flag options in GPEC.in instruct GPEC to output ASCII file data. Some of these outputs are always available. Some, however, require a input error field instead of a hard coded harmonic_flag call. Both groups are listed in detail here.</p>
<p>Outputs Always Available</p>
<p>These GPEC outputs can always be obtained from a equil.bin file output from DCON.</p>
<p>GPEC_response_n#.out</p>
<blockquote>
<div><p><strong>Flag</strong> resp_flag</p>
<p><strong>Info</strong> Energy for DCON eigenmodes and stability indices. Eigenvalues and eigenvectors for vacuum and plasma inductance (virtual casing currents to fields), plasma permeability (external fields to total fields), and plasma reluctance.</p>
</div></blockquote>
<p>GPEC_singcoup_matrix_n#.out</p>
<blockquote>
<div><p><strong>Flag</strong> singcoup_flag</p>
<p><strong>Info</strong> The coupling matrix to resonant fields, coupling matrix to singular currents, and to island half-widths is given for each rational surface within the plasma (q=2, 3, etc) for each surface the real and imaginary coupling constants are given for each poloidal mode number on the control surface.</p>
</div></blockquote>
<p>GPEC_singcoup_svd_n#.out</p>
<blockquote>
<div><p><strong>Flag</strong> singcoup_flag</p>
<p><strong>Info</strong> The SVD singular values (s) and eigen vectors for each coupling matrix in GPEC_singcoup_matrix_n#.out. Large s corresponds to large amplification, with the largest (most important mode) listed at the top. The results should be dotted with the unweighted normal field spectrum to give physical meaning.</p>
</div></blockquote>
<p>Outputs Available When Error Field is Provided</p>
<p>These outputs are only available when an external error field file is provided as an input to GPEC. This means GPEC.in must have the data_flag turned on and a infile specified.</p>
<p>GPEC_control_n#.out</p>
<blockquote>
<div><p><strong>Flag</strong></p>
<p><strong>Info</strong> The Plasma response for an external perturbation on the control surface. This includes the vacuum energy, surface energy, plasma energy, real and imaginary vacuum input mathbf{B}_{in} and total field on plasma boundarymathbf{B}_{out}as a function of poloidal mode number.</p>
</div></blockquote>
<p>GPEC_singfld_n#.out</p>
<blockquote>
<div><p><strong>Flag</strong> singfld_flag</p>
<p><strong>Info</strong> The Psi_{N}, total resonant mathbf{B} (real and imaginary), singular current (real and imaginary), island half width in units of normalized flux and Chirikov parameter at rational surface inside the plasma.</p>
<p><strong>Flag</strong> singcoup_flag</p>
<p><strong>Info</strong> Additional section showing the overlap field and overlap percentage for each eigenmode in the singcoup_svd output.</p>
</div></blockquote>
<p>GPEC_pmod_n#.out</p>
<blockquote>
<div><p><strong>Flag</strong> pmodb_flag</p>
<p><strong>Info</strong> Eulerian and Lagrangian left|mathbf{B}right|(real and imaginary) for each poloidal mode number at each value of Psi_{N} output. This output is necessary for NTV post processing.</p>
</div></blockquote>
<p>GPEC_xbnormal_n#.out</p>
<blockquote>
<div><p><strong>Flag</strong> xbnormal_flag</p>
<p><strong>Info</strong> The normal components of the displacement, magnetic field without the plasma response, and magnetic field with the plasma response included for each poloidal mode number at each value of Psi_{N} output.??</p>
</div></blockquote>
<p>GPEC_*rzphi_n#.out</p>
<p>A number of output files have a similar structure. Here the * in the file name is replaced by the appropriate leading letters of the corresponding flag. For example the xrzphi_flag for n=1 creates a GPEC_xrzphi_n1.out file. some common properties of these files are:</p>
<ul>
<li><p class="first">real and imaginary components: Output files contain two dimensional data on an left(r,zright) grid for a single toroidal harmonic. To translate into three dimensions, perform the transformationBleft(r,z,phiright)=B_{real}left(r,zright)cosleft(nphiright)+B_{imag}left(r,zright)sinleft(nphiright)</p>
</li>
<li><p class="first">l parameter: 1 designates points inside plasma, 0 points in vacuum, -1 points near/on surface (singularity)</p>
<blockquote>
<div><p><strong>Flag</strong> eqbrzphi_flag</p>
<p><strong>Info</strong> The original equilibrium field on a left(r,z,phiright) grid.</p>
<p><strong>Flag</strong> brzphi_flag</p>
<p><strong>Info</strong> The left(r,z,phiright)components of the perturbed magnetic fields inside the plasma on the left(r,z,phiright) grid.</p>
<p><strong>Flag</strong> xrzphi_flag</p>
<p><strong>Info</strong> The displacement on the left(r,z,phiright) grid.</p>
<p><strong>Flag</strong> vbrzphi_flag</p>
<p><strong>Info</strong> The false perturbed magnetic field in the vacuum region on the left(r,z,phiright) grid calculated using the GPEC boundary surface current composed of both the vacuum component and the plasma response.</p>
<p><strong>Flag</strong> vpbrzphi_flag</p>
<p><strong>Info</strong> The true perturbed magnetic field in the vacuum region on the left(r,z,phiright) grid due to the plasma response alone calculated from the plasma response surface condition.</p>
<p><strong>Flag</strong> vvbrzphi_flag</p>
<p><strong>Info</strong> The false perturbed magnetic field in the vacuum region on the left(r,z,phiright) grid calculated using the GPEC boundary surface current from the external fields alone.</p>
<p><strong>Flag</strong> ssbrzphi_flag</p>
<p><strong>Info</strong> The false perturbed magnetic field in the vacuum region on the left(r,z,phiright) grid calculated using the GPEC boundary surface current from the external fields alone.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="binary-file-outputs">
<h3>Binary File Outputs<a class="headerlink" href="#binary-file-outputs" title="Permalink to this headline">¶</a></h3>
<p>These files are designed for quick and easy visualization of results using the xdraw command. For more details on using xdraw see the devoted section on this page.</p>
<p>xbnormal.bin</p>
<blockquote>
<div><p><strong>Flag</strong> bin_flag</p>
<p><strong>Info</strong> The normal displacement and magnetic field as functions of Psi_{N} for xdraw.</p>
</div></blockquote>
<p>xbnormal_2d.bin</p>
<blockquote>
<div><p><strong>Flag</strong> bin_2d_flag</p>
<p><strong>Info</strong> Contour profiles of the normal displacement and magnetic field in (R,z) for xdraw.</p>
</div></blockquote>
<p>pflux_re(im)_2d.bin</p>
<blockquote>
<div><p><strong>Flag</strong> bin_2d_flag</p>
<p><strong>Info</strong> Contour profiles of the real (imaginary) perturbed flux in (R,z) for xdraw.</p>
</div></blockquote>
<p>bnormal_spectrum.bin</p>
<blockquote>
<div><p><strong>Flag</strong> bin_flag</p>
<p><strong>Info</strong> Surfmn type contours of the normal perturbed magnetic fields as a function of poloidal harmonic number and Psi_{N}.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="xdraw">
<h2>xdraw<a class="headerlink" href="#xdraw" title="Permalink to this headline">¶</a></h2>
<p>The binary GPEC outputs can be viewed using the commandxdraw filenamewhere filename is one of the .bin files created by GPEC (“.bin” excluded). This is a quick way to view results immediately as they are produced. The xdraw tool provides a highly interactive environment that takes keystroke inputs to change plot display options, navigate plots, display single or multiple responses at once, do limited post processing (get a gradient, or ratio), and save figures. For a full list of the command options, enter the xdraw environment and press “k”.</p>
</div>
</div>


    </div>
    
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/outputs.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2015, PPPL.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>